(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return i})),a.d(t,"g",(function(){return d})),a.d(t,"d",(function(){return j})),a.d(t,"c",(function(){return b}));var s=a(2),c=a(3),n=a(5);const r={ADD_USER:"ADD_USER",ADD_MESSAGE:"ADD_MESSAGE",GET_CONVERSATIONS:"GET_CONVERSATIONS",GET_MESSAGES:"GET_MESSAGES",UPDATE_MESSAGES:"UPDATE_MESSAGES",DELETE_MESSAGES:"DELETE_MESSAGES",DELETE_CONVERSATION:"DELETE_CONVERSATION",CHECK_ONLINE_OFFLINE:"CHECK_ONLINE_OFFLINE"},o=e=>{let{msg:t,auth:a,socket:o}=e;return async e=>{e({type:r.ADD_MESSAGE,payload:t});const{_id:l,avatar:i,fullname:d,username:j}=a.user;o.emit("addMessage",Object(s.a)(Object(s.a)({},t),{},{user:{_id:l,avatar:i,fullname:d,username:j}}));try{await Object(n.d)("message",t,a.token)}catch(b){e({type:c.c.ALERT,payload:{error:b.response.data.msg}})}}},l=e=>{let{auth:t,page:a=1}=e;return async e=>{try{const c=await Object(n.b)("conversations?limit=".concat(9*a),t.token);let o=[];c.data.conversations.forEach((e=>{e.recipients.forEach((a=>{a._id!==t.user._id&&o.push(Object(s.a)(Object(s.a)({},a),{},{text:e.text,media:e.media,call:e.call}))}))})),e({type:r.GET_CONVERSATIONS,payload:{newArr:o,result:c.data.result}})}catch(o){e({type:c.c.ALERT,payload:{error:o.response.data.msg}})}}},i=e=>{let{auth:t,id:a,page:o=1}=e;return async e=>{try{const c=await Object(n.b)("message/".concat(a,"?limit=").concat(9*o),t.token),l=Object(s.a)(Object(s.a)({},c.data),{},{messages:c.data.messages.reverse()});e({type:r.GET_MESSAGES,payload:Object(s.a)(Object(s.a)({},l),{},{_id:a,page:o})})}catch(l){e({type:c.c.ALERT,payload:{error:l.response.data.msg}})}}},d=e=>{let{auth:t,id:a,page:o=1}=e;return async e=>{try{const c=await Object(n.b)("message/".concat(a,"?limit=").concat(9*o),t.token),l=Object(s.a)(Object(s.a)({},c.data),{},{messages:c.data.messages.reverse()});e({type:r.UPDATE_MESSAGES,payload:Object(s.a)(Object(s.a)({},l),{},{_id:a,page:o})})}catch(l){e({type:c.c.ALERT,payload:{error:l.response.data.msg}})}}},j=e=>{let{msg:t,data:a,auth:s}=e;return async e=>{const o=Object(c.a)(a,t._id);e({type:r.DELETE_MESSAGES,payload:{newData:o,_id:t.recipient}});try{await Object(n.a)("message/".concat(t._id),s.token)}catch(l){e({type:c.c.ALERT,payload:{error:l.response.data.msg}})}}},b=e=>{let{auth:t,id:a}=e;return async e=>{e({type:r.DELETE_CONVERSATION,payload:a});try{await Object(n.a)("conversation/".concat(a),t.token)}catch(s){e({type:c.c.ALERT,payload:{error:s.response.data.msg}})}}}},12:function(e,t,a){"use strict";t.a=a.p+"static/media/loading.10625dac.gif"},13:function(e,t,a){"use strict";a(1);var s=a(4),c=a(0);t.a=e=>{let{src:t,size:a}=e;const{theme:n}=Object(s.c)((e=>e));return Object(c.jsx)("img",{src:t,alt:"avatar",className:a,style:{filter:"".concat(n?"invert(1)":"invert(0)")}})}},14:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return j})),a.d(t,"d",(function(){return b}));var s=a(2),c=a(3),n=a(5),r=a(26),o=a(8);const l={LOADING:"LOADING_PROFILE",GET_USER:"GET_PROFILE_USER",FOLLOW:"FOLLOW",UNFOLLOW:"UNFOLLOW",GET_ID:"GET_PROFILE_ID",GET_POSTS:"GET_PROFILE_POSTS",UPDATE_POST:"UPDATE_PROFILE_POST"},i=e=>{let{id:t,auth:a}=e;return async e=>{e({type:l.GET_ID,payload:t});try{e({type:l.LOADING,payload:!0});const c=Object(n.b)("/user/".concat(t),a.token),r=Object(n.b)("/user_posts/".concat(t),a.token),o=await c,i=await r;e({type:l.GET_USER,payload:o.data}),e({type:l.GET_POSTS,payload:Object(s.a)(Object(s.a)({},i.data),{},{_id:t,page:2})}),e({type:l.LOADING,payload:!1})}catch(r){e({type:c.c.ALERT,payload:{error:r.response.data.msg}})}}},d=e=>{let{userData:t,avatar:a,auth:o}=e;return async e=>{if(!t.fullname)return e({type:c.c.ALERT,payload:{error:"Please add your full name."}});if(t.fullname.length>25)return e({type:c.c.ALERT,payload:{error:"Your full name too long."}});if(t.story.length>200)return e({type:c.c.ALERT,payload:{error:"Your story too long."}});try{let l;e({type:c.c.ALERT,payload:{loading:!0}}),a&&(l=await Object(r.b)([a]));const i=await Object(n.c)("user",Object(s.a)(Object(s.a)({},t),{},{avatar:a?l[0].url:o.user.avatar}),o.token);e({type:c.c.AUTH,payload:Object(s.a)(Object(s.a)({},o),{},{user:Object(s.a)(Object(s.a)(Object(s.a)({},o.user),t),{},{avatar:a?l[0].url:o.user.avatar})})}),e({type:c.c.ALERT,payload:{success:i.data.msg}})}catch(l){e({type:c.c.ALERT,payload:{error:l.response.data.msg}})}}},j=e=>{let{users:t,user:a,auth:r,socket:i}=e;return async e=>{let d;t.every((e=>e._id!==a._id))?d=Object(s.a)(Object(s.a)({},a),{},{followers:[...a.followers,r.user]}):t.forEach((e=>{e._id===a._id&&(d=Object(s.a)(Object(s.a)({},e),{},{followers:[...e.followers,r.user]}))})),e({type:l.FOLLOW,payload:d}),e({type:c.c.AUTH,payload:Object(s.a)(Object(s.a)({},r),{},{user:Object(s.a)(Object(s.a)({},r.user),{},{following:[...r.user.following,d]})})});try{const t=await Object(n.c)("user/".concat(a._id,"/follow"),null,r.token);i.emit("follow",t.data.newUser);const s={id:r.user._id,text:"has started to follow you.",recipients:[d._id],url:"/profile/".concat(r.user._id)};e(Object(o.b)({msg:s,auth:r,socket:i}))}catch(j){e({type:c.c.ALERT,payload:{error:j.response.data.msg}})}}},b=e=>{let{users:t,user:a,auth:r,socket:i}=e;return async e=>{let d;t.every((e=>e._id!==a._id))?d=Object(s.a)(Object(s.a)({},a),{},{followers:Object(c.a)(a.followers,r.user._id)}):t.forEach((e=>{e._id===a._id&&(d=Object(s.a)(Object(s.a)({},e),{},{followers:Object(c.a)(e.followers,r.user._id)}))})),e({type:l.UNFOLLOW,payload:d}),e({type:c.c.AUTH,payload:Object(s.a)(Object(s.a)({},r),{},{user:Object(s.a)(Object(s.a)({},r.user),{},{following:Object(c.a)(r.user.following,d._id)})})});try{const t=await Object(n.c)("user/".concat(a._id,"/unfollow"),null,r.token);i.emit("unFollow",t.data.newUser);const s={id:r.user._id,text:"has started to follow you.",recipients:[d._id],url:"/profile/".concat(r.user._id)};e(Object(o.f)({msg:s,auth:r,socket:i}))}catch(j){e({type:c.c.ALERT,payload:{error:j.response.data.msg}})}}}},142:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(44),r=a.n(n),o=(a(91),a(7)),l=a(11),i=a(0);var d=()=>Object(i.jsx)("div",{className:"position-relative",style:{minHeight:"calc(100vh - 70px)"},children:Object(i.jsx)("h2",{className:"position-absolute text-secondary",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"404 | Not Found."})}),j=a(4);const b=e=>{try{return c.a.createElement(a(96)("./".concat(e)).default)}catch(t){return Object(i.jsx)(d,{})}};var u=()=>{const{page:e,id:t}=Object(l.h)(),{auth:a}=Object(j.c)((e=>e));let s="";return a.token&&(s=t?"".concat(e,"/[id]"):"".concat(e)),b(s)},m=a(2);var O=e=>localStorage.getItem("firstLogin")?Object(i.jsx)(l.b,Object(m.a)({},e)):Object(i.jsx)(l.a,{to:"/"}),p=a(47),h=a(45),f=a(46),x=a(3);var y=()=>Object(i.jsx)("div",{className:"position-fixed w-100 h-100 text-center loading",style:{background:"#0008",color:"white",top:0,left:0,zIndex:50},children:Object(i.jsxs)("svg",{width:"205",height:"250",viewBox:"0 0 40 50",children:[Object(i.jsx)("polygon",{stroke:"#fff",strokeWidth:"1",fill:"none",points:"20,1 40,40 1,40"}),Object(i.jsx)("text",{fill:"#fff",x:"5",y:"47",children:"Loading"})]})});var g=e=>{let{msg:t,handleShow:a,bgColor:s}=e;return Object(i.jsxs)("div",{className:"toast show position-fixed text-light ".concat(s),style:{top:"5px",right:"5px",minWidth:"200px",zIndex:50},children:[Object(i.jsxs)("div",{className:"toast-header text-light ".concat(s),children:[Object(i.jsx)("strong",{className:"mr-auto text-light",children:t.title}),Object(i.jsx)("button",{className:"ml-2 mb-1 close text-light","data-dismiss":"toast",style:{outline:"none"},onClick:a,children:"\xd7"})]}),Object(i.jsx)("div",{className:"toast-body",children:t.body})]})};var v=()=>{const{alert:e}=Object(j.c)((e=>e)),t=Object(j.b)();return Object(i.jsxs)("div",{children:[e.loading&&Object(i.jsx)(y,{}),e.error&&Object(i.jsx)(g,{msg:{title:"Error",body:e.error},handleShow:()=>t({type:x.c.ALERT,payload:{}}),bgColor:"bg-danger"}),e.success&&Object(i.jsx)(g,{msg:{title:"Success",body:e.success},handleShow:()=>t({type:x.c.ALERT,payload:{}}),bgColor:"bg-success"})]})},E=a(28),N=a(13),_=a(32),w=a.n(_),T=a(8);var S=()=>{const{auth:e,notify:t}=Object(j.c)((e=>e)),a=Object(j.b)(),s=()=>{a({type:T.a.UPDATE_SOUND,payload:!t.sound})};return Object(i.jsxs)("div",{style:{minWidth:"300px"},children:[Object(i.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-3",children:[Object(i.jsx)("h3",{children:"Notification"}),t.sound?Object(i.jsx)("i",{className:"fas fa-bell text-danger",style:{fontSize:"1.2rem",cursor:"pointer"},onClick:s}):Object(i.jsx)("i",{className:"fas fa-bell-slash text-danger",style:{fontSize:"1.2rem",cursor:"pointer"},onClick:s})]}),Object(i.jsx)("hr",{className:"mt-0"}),0===t.data.length&&Object(i.jsx)("img",{src:"data:image/png;base64,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",alt:"NoNotice",className:"w-100"}),Object(i.jsx)("div",{style:{maxHeight:"calc(100vh - 200px)",overflow:"auto"},children:t.data.map(((t,s)=>Object(i.jsxs)("div",{className:"px-2 mb-3",children:[Object(i.jsxs)(o.b,{to:"".concat(t.url),className:"d-flex text-dark align-items-center",onClick:()=>(t=>{a(Object(T.e)({msg:t,auth:e}))})(t),children:[Object(i.jsx)(N.a,{src:t.user.avatar,size:"big-avatar"}),Object(i.jsxs)("div",{className:"mx-1 flex-fill",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("strong",{className:"mr-1",children:t.user.username}),Object(i.jsx)("span",{children:t.text})]}),t.content&&Object(i.jsxs)("small",{children:[t.content.slice(0,20),"..."]})]}),t.image&&Object(i.jsx)("div",{style:{width:"30px"},children:t.image.match(/video/i)?Object(i.jsx)("video",{src:t.image,width:"100%"}):Object(i.jsx)(N.a,{src:t.image,size:"medium-avatar"})})]}),Object(i.jsxs)("small",{className:"text-muted d-flex justify-content-between px-2",children:[w()(t.createdAt).fromNow(),!t.isRead&&Object(i.jsx)("i",{className:"fas fa-circle text-primary"})]})]},s)))}),Object(i.jsx)("hr",{className:"my-1"}),Object(i.jsx)("div",{className:"text-right text-danger mr-2",style:{cursor:"pointer"},onClick:()=>{const s=t.data.filter((e=>!1===e.isRead));return 0===s.length||window.confirm("You have ".concat(s.length," unread notices. Are you sure you want to delete all?"))?a(Object(T.c)(e.token)):void 0},children:"Delete All"})]})};var k=()=>{const{auth:e,theme:t,notify:a}=Object(j.c)((e=>e)),s=Object(j.b)(),{pathname:c}=Object(l.g)(),n=e=>{if(e===c)return"active"};return Object(i.jsx)("div",{className:"menu",children:Object(i.jsxs)("ul",{className:"navbar-nav flex-row",children:[[{label:"Home",icon:"home",path:"/"},{label:"Message",icon:"near_me",path:"/message"},{label:"Discover",icon:"explore",path:"/discover"}].map(((e,t)=>Object(i.jsx)("li",{className:"nav-item px-2 ".concat(n(e.path)),children:Object(i.jsx)(o.b,{className:"nav-link",to:e.path,children:Object(i.jsx)("span",{className:"material-icons",children:e.icon})})},t))),Object(i.jsxs)("li",{className:"nav-item dropdown",style:{opacity:1},children:[Object(i.jsxs)("span",{className:"nav-link position-relative",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[Object(i.jsx)("span",{className:"material-icons",style:{color:a.data.length>0?"crimson":""},children:"favorite"}),Object(i.jsx)("span",{className:"notify_length",children:a.data.length})]}),Object(i.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",style:{transform:"translateX(75px)"},children:Object(i.jsx)(S,{})})]}),Object(i.jsxs)("li",{className:"nav-item dropdown",style:{opacity:1},children:[Object(i.jsx)("span",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(i.jsx)(N.a,{src:e.user.avatar,size:"medium-avatar"})}),Object(i.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[Object(i.jsx)(o.b,{className:"dropdown-item",to:"/profile/".concat(e.user._id),children:"Profile"}),Object(i.jsx)("label",{htmlFor:"theme",className:"dropdown-item",onClick:()=>s({type:x.c.THEME,payload:!t}),children:t?"Light mode":"Dark mode"}),Object(i.jsx)("div",{className:"dropdown-divider"}),Object(i.jsx)(o.b,{className:"dropdown-item",to:"/",onClick:()=>s(Object(E.b)()),children:"Logout"})]})]})]})})},A=a(5),L=a(25),C=a(12);var D=()=>{const[e,t]=Object(s.useState)(""),[a,c]=Object(s.useState)([]),{auth:n}=Object(j.c)((e=>e)),r=Object(j.b)(),[o,l]=Object(s.useState)(!1),d=()=>{t(""),c([])};return Object(i.jsxs)("form",{className:"search_form",onSubmit:async t=>{if(t.preventDefault(),e)try{l(!0);const t=await Object(A.b)("search?username=".concat(e),n.token);c(t.data.users),l(!1)}catch(a){r({type:x.c.ALERT,payload:{error:a.response.data.msg}})}},children:[Object(i.jsx)("input",{type:"text",name:"search",value:e,id:"search",title:"Enter to Search",onChange:e=>t(e.target.value.toLowerCase().replace(/ /g,""))}),Object(i.jsxs)("div",{className:"search_icon",style:{opacity:e?0:.3},children:[Object(i.jsx)("span",{className:"material-icons",children:"search"}),Object(i.jsx)("span",{children:"Enter to Search"})]}),Object(i.jsx)("div",{className:"close_search",onClick:d,style:{opacity:0===a.length?0:1},children:"\xd7"}),Object(i.jsx)("button",{type:"submit",style:{display:"none"},children:"Search"}),o&&Object(i.jsx)("img",{className:"loading",src:C.a,alt:"loading"}),Object(i.jsx)("div",{className:"users",children:e&&a.map((e=>Object(i.jsx)(L.a,{user:e,border:"border",handleClose:d},e._id)))})]})};var I=()=>Object(i.jsx)("div",{className:"header bg-light",children:Object(i.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light  bg-light justify-content-between align-middle",children:[Object(i.jsx)(o.b,{to:"/",className:"logo",children:Object(i.jsx)("h1",{className:"navbar-brand text-uppercase p-0 m-0",onClick:()=>window.scrollTo({top:0}),children:"djamel art"})}),Object(i.jsx)(D,{}),Object(i.jsx)(k,{})]})}),R=a(6),P=a(33),U=a(23);var F=()=>{const{auth:e,theme:t,status:a,socket:c}=Object(j.c)((e=>e)),n=Object(j.b)(),[r,o]=Object(s.useState)(""),[l,d]=Object(s.useState)([]),[b,u]=Object(s.useState)(!1),m=Object(s.useRef)(),O=Object(s.useRef)(),[p,h]=Object(s.useState)("");return Object(s.useEffect)((()=>{a.onEdit&&(o(a.content),d(a.images))}),[a]),Object(i.jsx)("div",{className:"status_modal",children:Object(i.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),0===l.length)return n({type:x.c.ALERT,payload:{error:"Please add your photo."}});a.onEdit?n(Object(R.j)({content:r,images:l,auth:e,status:a})):n(Object(R.b)({content:r,images:l,auth:e,socket:c})),o(""),d([]),p&&p.stop(),n({type:x.c.STATUS,payload:!1})},children:[Object(i.jsxs)("div",{className:"status_header",children:[Object(i.jsx)("h5",{className:"m-0",children:"Create Post"}),Object(i.jsx)("span",{onClick:()=>n({type:x.c.STATUS,payload:!1}),children:"\xd7"})]}),Object(i.jsxs)("div",{className:"status_body",children:[Object(i.jsx)("textarea",{name:"content",value:r,placeholder:"".concat(e.user.username,", what are you thinking?"),onChange:e=>o(e.target.value),style:{filter:t?"invert(1)":"invert(0)",color:t?"white":"#111",background:t?"rgba(0,0,0,.03)":""}}),Object(i.jsxs)("div",{className:"d-flex",children:[Object(i.jsx)("div",{className:"flex-fill"}),Object(i.jsx)(P.a,{setContent:o,content:r,theme:t})]}),Object(i.jsx)("div",{className:"show_images",children:l.map(((e,a)=>Object(i.jsxs)("div",{id:"file_img",children:[e.camera?Object(U.a)(e.camera,t):e.url?Object(i.jsx)(i.Fragment,{children:e.url.match(/video/i)?Object(U.b)(e.url,t):Object(U.a)(e.url,t)}):Object(i.jsx)(i.Fragment,{children:e.type.match(/video/i)?Object(U.b)(URL.createObjectURL(e),t):Object(U.a)(URL.createObjectURL(e),t)}),Object(i.jsx)("span",{onClick:()=>(e=>{const t=[...l];t.splice(e,1),d(t)})(a),children:"\xd7"})]},a)))}),b&&Object(i.jsxs)("div",{className:"stream position-relative",children:[Object(i.jsx)("video",{autoPlay:!0,muted:!0,ref:m,width:"100%",height:"100%",style:{filter:t?"invert(1)":"invert(0)"}}),Object(i.jsx)("span",{onClick:()=>{p.stop(),u(!1)},children:"\xd7"}),Object(i.jsx)("canvas",{ref:O,style:{display:"none"}})]}),Object(i.jsx)("div",{className:"input_images",children:b?Object(i.jsx)("i",{className:"fas fa-camera",onClick:()=>{const e=m.current.clientWidth,t=m.current.clientHeight;O.current.setAttribute("width",e),O.current.setAttribute("height",t);O.current.getContext("2d").drawImage(m.current,0,0,e,t);let a=O.current.toDataURL();d([...l,{camera:a}])}}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("i",{className:"fas fa-camera",onClick:()=>{u(!0),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{m.current.srcObject=e,m.current.play();const t=e.getTracks();h(t[0])})).catch((e=>console.log(e)))}}),Object(i.jsxs)("div",{className:"file_upload",children:[Object(i.jsx)("i",{className:"fas fa-image"}),Object(i.jsx)("input",{type:"file",name:"file",id:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>{const t=[...e.target.files];let a="",s=[];t.forEach((e=>e?e.size>5242880?a="The image/video largest is 5mb.":s.push(e):a="File does not exist.")),a&&n({type:x.c.ALERT,payload:{error:a}}),d([...l,...s])}})]})]})})]}),Object(i.jsx)("div",{className:"status_footer",children:Object(i.jsx)("button",{className:"btn btn-secondary w-100",type:"submit",children:"Post"})})]})})};const G="LOADING_SUGGES",M="GET_USERS_SUGGES";var H=a(84),Q=a.n(H),z=a(10),K=a.p+"static/media/got-it-done-613.89a311f0.mp3";var B=()=>{const{auth:e,socket:t,notify:a,online:c,call:n}=Object(j.c)((e=>e)),r=Object(j.b)(),o=Object(s.useRef)();return Object(s.useEffect)((()=>{t.emit("joinUser",e.user)}),[t,e.user]),Object(s.useEffect)((()=>(t.on("likeToClient",(e=>{r({type:R.a.UPDATE_POST,payload:e})})),()=>t.off("likeToClient"))),[t,r]),Object(s.useEffect)((()=>(t.on("unLikeToClient",(e=>{r({type:R.a.UPDATE_POST,payload:e})})),()=>t.off("unLikeToClient"))),[t,r]),Object(s.useEffect)((()=>(t.on("createCommentToClient",(e=>{r({type:R.a.UPDATE_POST,payload:e})})),()=>t.off("createCommentToClient"))),[t,r]),Object(s.useEffect)((()=>(t.on("deleteCommentToClient",(e=>{r({type:R.a.UPDATE_POST,payload:e})})),()=>t.off("deleteCommentToClient"))),[t,r]),Object(s.useEffect)((()=>(t.on("followToClient",(t=>{r({type:x.c.AUTH,payload:Object(m.a)(Object(m.a)({},e),{},{user:t})})})),()=>t.off("followToClient"))),[t,r,e]),Object(s.useEffect)((()=>(t.on("unFollowToClient",(t=>{r({type:x.c.AUTH,payload:Object(m.a)(Object(m.a)({},e),{},{user:t})})})),()=>t.off("unFollowToClient"))),[t,r,e]),Object(s.useEffect)((()=>(t.on("createNotifyToClient",(e=>{var t,s,c;r({type:T.a.CREATE_NOTIFY,payload:e}),a.sound&&o.current.play(),t=e.user.username+" "+e.text,s=e.user.avatar,c=e.url,new Notification("V-NETWORK",{body:t,icon:s}).onclick=e=>{e.preventDefault(),window.open(c,"_blank")}})),()=>t.off("createNotifyToClient"))),[t,r,a.sound]),Object(s.useEffect)((()=>(t.on("removeNotifyToClient",(e=>{r({type:T.a.REMOVE_NOTIFY,payload:e})})),()=>t.off("removeNotifyToClient"))),[t,r]),Object(s.useEffect)((()=>(t.on("addMessageToClient",(e=>{r({type:z.a.ADD_MESSAGE,payload:e}),r({type:z.a.ADD_USER,payload:Object(m.a)(Object(m.a)({},e.user),{},{text:e.text,media:e.media})})})),()=>t.off("addMessageToClient"))),[t,r]),Object(s.useEffect)((()=>{t.emit("checkUserOnline",e.user)}),[t,e.user]),Object(s.useEffect)((()=>(t.on("checkUserOnlineToMe",(e=>{e.forEach((e=>{c.includes(e.id)||r({type:x.c.ONLINE,payload:e.id})}))})),()=>t.off("checkUserOnlineToMe"))),[t,r,c]),Object(s.useEffect)((()=>(t.on("checkUserOnlineToClient",(e=>{c.includes(e)||r({type:x.c.ONLINE,payload:e})})),()=>t.off("checkUserOnlineToClient"))),[t,r,c]),Object(s.useEffect)((()=>(t.on("CheckUserOffline",(e=>{r({type:x.c.OFFLINE,payload:e})})),()=>t.off("CheckUserOffline"))),[t,r]),Object(s.useEffect)((()=>(t.on("callUserToClient",(e=>{r({type:x.c.CALL,payload:e})})),()=>t.off("callUserToClient"))),[t,r]),Object(s.useEffect)((()=>(t.on("userBusy",(e=>{r({type:x.c.ALERT,payload:{error:"".concat(n.username," is busy!")}})})),()=>t.off("userBusy"))),[t,r,n]),Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("audio",{controls:!0,ref:o,style:{display:"none"},children:Object(i.jsx)("source",{src:K,type:"audio/mp3"})})})},Y=a.p+"static/media/ringring.278d7816.mp3";var X=()=>{const{call:e,auth:t,peer:a,socket:c,theme:n}=Object(j.c)((e=>e)),r=Object(j.b)(),[o,l]=Object(s.useState)(0),[d,b]=Object(s.useState)(0),[u,O]=Object(s.useState)(0),[p,h]=Object(s.useState)(0),[f,y]=Object(s.useState)(!1),g=Object(s.useRef)(),v=Object(s.useRef)(),[E,_]=Object(s.useState)(null),[w,T]=Object(s.useState)(null);Object(s.useEffect)((()=>{const e=()=>{h((e=>e+1)),setTimeout(e,1e3)};return e(),()=>h(0)}),[]),Object(s.useEffect)((()=>{O(p%60),b(parseInt(p/60)),l(parseInt(p/3600))}),[p]);const S=Object(s.useCallback)(((e,a,s)=>{if(e.recipient!==t.user._id||s){const s={sender:e.sender,recipient:e.recipient,text:"",media:[],call:{video:e.video,times:a},createdAt:(new Date).toISOString()};r(Object(z.b)({msg:s,auth:t,socket:c}))}}),[t,r,c]),k=()=>{E&&E.forEach((e=>e.stop())),w&&w.close();let t=f?p:0;c.emit("endCall",Object(m.a)(Object(m.a)({},e),{},{times:t})),S(e,t),r({type:x.c.CALL,payload:null})};Object(s.useEffect)((()=>{if(!f){const t=setTimeout((()=>{c.emit("endCall",Object(m.a)(Object(m.a)({},e),{},{times:0})),S(e,0),r({type:x.c.CALL,payload:null})}),15e3);return()=>clearTimeout(t)}h(0)}),[r,f,e,c,S]),Object(s.useEffect)((()=>(c.on("endCallToClient",(e=>{E&&E.forEach((e=>e.stop())),w&&w.close(),S(e,e.times),r({type:x.c.CALL,payload:null})})),()=>c.off("endCallToClient"))),[c,r,E,S,w]);const A=e=>{const t={audio:!0,video:e};return navigator.mediaDevices.getUserMedia(t)},L=(e,t)=>{let a=e;a.srcObject=t,a.play()},C=()=>{A(e.video).then((t=>{L(g.current,t);const s=t.getTracks();_(s);const c=a.call(e.peerId,t);c.on("stream",(function(e){L(v.current,e)})),y(!0),T(c)}))};Object(s.useEffect)((()=>(a.on("call",(t=>{A(e.video).then((e=>{g.current&&L(g.current,e);const a=e.getTracks();_(a),t.answer(e),t.on("stream",(function(e){v.current&&L(v.current,e)})),y(!0),T(t)}))})),()=>a.removeListener("call"))),[a,e.video]),Object(s.useEffect)((()=>(c.on("callerDisconnect",(()=>{E&&E.forEach((e=>e.stop())),w&&w.close(),S(e,f?p:0,!0),r({type:x.c.CALL,payload:null}),r({type:x.c.ALERT,payload:{error:"The ".concat(e.username," disconnect")}})})),()=>c.off("callerDisconnect"))),[c,E,r,e,S,f,p,w]);const D=e=>{e.pause(),e.currentTime=0};return Object(s.useEffect)((()=>{let e=new Audio(Y);return f?D(e):(e=>{e.play()})(e),()=>D(e)}),[f]),Object(i.jsxs)("div",{className:"call_modal",children:[Object(i.jsxs)("div",{className:"call_box",style:{display:f&&e.video?"none":"flex"},children:[Object(i.jsxs)("div",{className:"text-center",style:{padding:"40px 0"},children:[Object(i.jsx)(N.a,{src:e.avatar,size:"supper-avatar"}),Object(i.jsx)("h4",{children:e.username}),Object(i.jsx)("h6",{children:e.fullname}),f?Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:o.toString().length<2?"0"+o:o}),Object(i.jsx)("span",{children:":"}),Object(i.jsx)("span",{children:d.toString().length<2?"0"+d:d}),Object(i.jsx)("span",{children:":"}),Object(i.jsx)("span",{children:u.toString().length<2?"0"+u:u})]}):Object(i.jsx)("div",{children:e.video?Object(i.jsx)("span",{children:"calling video..."}):Object(i.jsx)("span",{children:"calling audio..."})})]}),!f&&Object(i.jsxs)("div",{className:"timer",children:[Object(i.jsx)("small",{children:d.toString().length<2?"0"+d:d}),Object(i.jsx)("small",{children:":"}),Object(i.jsx)("small",{children:u.toString().length<2?"0"+u:u})]}),Object(i.jsxs)("div",{className:"call_menu",children:[Object(i.jsx)("button",{className:"material-icons text-danger",onClick:k,children:"call_end"}),e.recipient===t.user._id&&!f&&Object(i.jsx)(i.Fragment,{children:e.video?Object(i.jsx)("button",{className:"material-icons text-success",onClick:C,children:"videocam"}):Object(i.jsx)("button",{className:"material-icons text-success",onClick:C,children:"call"})})]})]}),Object(i.jsxs)("div",{className:"show_video",style:{opacity:f&&e.video?"1":"0",filter:n?"invert(1)":"invert(0)"},children:[Object(i.jsx)("video",{ref:g,className:"you_video",playsInline:!0,muted:!0}),Object(i.jsx)("video",{ref:v,className:"other_video",playsInline:!0}),Object(i.jsxs)("div",{className:"time_video",children:[Object(i.jsx)("span",{children:o.toString().length<2?"0"+o:o}),Object(i.jsx)("span",{children:":"}),Object(i.jsx)("span",{children:d.toString().length<2?"0"+d:d}),Object(i.jsx)("span",{children:":"}),Object(i.jsx)("span",{children:u.toString().length<2?"0"+u:u})]}),Object(i.jsx)("button",{className:"material-icons text-danger end_call",onClick:k,children:"call_end"})]})]})};var V=function(){const{auth:e,status:t,modal:a,call:c}=Object(j.c)((e=>e)),n=Object(j.b)();return Object(s.useEffect)((()=>{n(Object(E.c)());const e=Q()();return n({type:x.c.SOCKET,payload:e}),()=>e.close()}),[n]),Object(s.useEffect)((()=>{var t;e.token&&(n(Object(R.e)(e.token)),n((t=e.token,async e=>{try{e({type:G,payload:!0});const a=await Object(A.b)("suggestionsUser",t);e({type:M,payload:a.data}),e({type:G,payload:!1})}catch(a){e({type:x.c.ALERT,payload:{error:a.response.data.msg}})}})),n(Object(T.d)(e.token)))}),[n,e.token]),Object(s.useEffect)((()=>{"Notification"in window?"granted"===Notification.permission||"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){})):alert("This browser does not support desktop notification")}),[]),Object(i.jsxs)(o.a,{children:[Object(i.jsx)(v,{}),Object(i.jsx)("input",{type:"checkbox",id:"theme"}),Object(i.jsx)("div",{className:"App ".concat((t||a)&&"mode"),children:Object(i.jsxs)("div",{className:"main",children:[e.token&&Object(i.jsx)(I,{}),t&&Object(i.jsx)(F,{}),e.token&&Object(i.jsx)(B,{}),c&&Object(i.jsx)(X,{}),Object(i.jsx)(l.b,{exact:!0,path:"/",component:e.token?p.default:h.default}),Object(i.jsx)(l.b,{exact:!0,path:"/register",component:f.default}),Object(i.jsx)(O,{exact:!0,path:"/:page",component:u}),Object(i.jsx)(O,{exact:!0,path:"/:page/:id",component:u})]})})]})};var Z=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,156)).then((t=>{let{getCLS:a,getFID:s,getFCP:c,getLCP:n,getTTFB:r}=t;a(e),s(e),c(e),n(e),r(e)}))},J=a(34),W=a(86);const q={};var $=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;return t.type===x.c.AUTH?t.payload:e};const ee={};var te=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;return t.type===x.c.ALERT?t.payload:e};var ae=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===x.c.THEME?t.payload:e},se=a(14);const ce={loading:!1,ids:[],users:[],posts:[]};var ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se.a.LOADING:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case se.a.GET_USER:return Object(m.a)(Object(m.a)({},e),{},{users:[...e.users,t.payload.user]});case se.a.FOLLOW:case se.a.UNFOLLOW:return Object(m.a)(Object(m.a)({},e),{},{users:Object(x.b)(e.users,t.payload._id,t.payload)});case se.a.GET_ID:return Object(m.a)(Object(m.a)({},e),{},{ids:[...e.ids,t.payload]});case se.a.GET_POSTS:return Object(m.a)(Object(m.a)({},e),{},{posts:[...e.posts,t.payload]});case se.a.UPDATE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:Object(x.b)(e.posts,t.payload._id,t.payload)});default:return e}};var re=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===x.c.STATUS?t.payload:e};const oe={loading:!1,posts:[],result:0,page:2};var le=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.a.CREATE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:[t.payload,...e.posts]});case R.a.LOADING_POST:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case R.a.GET_POSTS:return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.posts,result:t.payload.result,page:t.payload.page});case R.a.UPDATE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:Object(x.b)(e.posts,t.payload._id,t.payload)});case R.a.DELETE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:Object(x.a)(e.posts,t.payload._id)});default:return e}};var ie=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===x.c.MODAL?t.payload:e};var de=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.a.GET_POST:return[...e,t.payload];case R.a.UPDATE_POST:return Object(x.b)(e,t.payload._id,t.payload);default:return e}},je=a(29);const be={loading:!1,posts:[],result:9,page:2,firstLoad:!1};var ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je.a.LOADING:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case je.a.GET_POSTS:return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.posts,result:t.payload.result,firstLoad:!0});case je.a.UPDATE_POST:return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.posts,result:t.payload.result,page:e.page+1});default:return e}};const me={loading:!1,users:[]};var Oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case M:return Object(m.a)(Object(m.a)({},e),{},{users:t.payload.users});default:return e}};var pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===x.c.SOCKET?t.payload:e};const he={loading:!1,data:[],sound:!1};var fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.a.GET_NOTIFIES:return Object(m.a)(Object(m.a)({},e),{},{data:t.payload});case T.a.CREATE_NOTIFY:return Object(m.a)(Object(m.a)({},e),{},{data:[t.payload,...e.data]});case T.a.REMOVE_NOTIFY:return Object(m.a)(Object(m.a)({},e),{},{data:e.data.filter((e=>e.id!==t.payload.id||e.url!==t.payload.url))});case T.a.UPDATE_NOTIFY:return Object(m.a)(Object(m.a)({},e),{},{data:Object(x.b)(e.data,t.payload._id,t.payload)});case T.a.UPDATE_SOUND:return Object(m.a)(Object(m.a)({},e),{},{sound:t.payload});case T.a.DELETE_ALL_NOTIFIES:return Object(m.a)(Object(m.a)({},e),{},{data:t.payload});default:return e}};const xe={users:[],resultUsers:0,data:[],firstLoad:!1};var ye=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.a.ADD_USER:return e.users.every((e=>e._id!==t.payload._id))?Object(m.a)(Object(m.a)({},e),{},{users:[t.payload,...e.users]}):e;case z.a.ADD_MESSAGE:return Object(m.a)(Object(m.a)({},e),{},{data:e.data.map((e=>e._id===t.payload.recipient||e._id===t.payload.sender?Object(m.a)(Object(m.a)({},e),{},{messages:[...e.messages,t.payload],result:e.result+1}):e)),users:e.users.map((e=>e._id===t.payload.recipient||e._id===t.payload.sender?Object(m.a)(Object(m.a)({},e),{},{text:t.payload.text,media:t.payload.media,call:t.payload.call}):e))});case z.a.GET_CONVERSATIONS:return Object(m.a)(Object(m.a)({},e),{},{users:t.payload.newArr,resultUsers:t.payload.result,firstLoad:!0});case z.a.GET_MESSAGES:return Object(m.a)(Object(m.a)({},e),{},{data:[...e.data,t.payload]});case z.a.UPDATE_MESSAGES:return Object(m.a)(Object(m.a)({},e),{},{data:Object(x.b)(e.data,t.payload._id,t.payload)});case z.a.DELETE_MESSAGES:return Object(m.a)(Object(m.a)({},e),{},{data:e.data.map((e=>e._id===t.payload._id?Object(m.a)(Object(m.a)({},e),{},{messages:t.payload.newData}):e))});case z.a.DELETE_CONVERSATION:return Object(m.a)(Object(m.a)({},e),{},{users:Object(x.a)(e.users,t.payload),data:Object(x.a)(e.data,t.payload)});case z.a.CHECK_ONLINE_OFFLINE:return Object(m.a)(Object(m.a)({},e),{},{users:e.users.map((e=>t.payload.includes(e._id)?Object(m.a)(Object(m.a)({},e),{},{online:!0}):Object(m.a)(Object(m.a)({},e),{},{online:!1})))});default:return e}};var ge=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.c.ONLINE:return[...e,t.payload];case x.c.OFFLINE:return e.filter((e=>e!==t.payload));default:return e}};var ve=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===x.c.CALL?t.payload:e},Ee=Object(J.combineReducers)({auth:$,alert:te,theme:ae,profile:ne,status:re,homePosts:le,modal:ie,detailPost:de,discover:ue,suggestions:Oe,socket:pe,notify:fe,message:ye,online:ge,call:ve}),Ne=a(85);const _e=Object(J.createStore)(Ee,Object(Ne.composeWithDevTools)(Object(J.applyMiddleware)(W.a)));var we=e=>{let{children:t}=e;return Object(i.jsx)(j.a,{store:_e,children:t})};r.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(we,{children:Object(i.jsx)(V,{})})}),document.getElementById("root")),Z()},23:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var s=a(4),c=(a(3),a(0));s.b;const n=e=>Object(c.jsx)("img",{src:e,alt:"images",className:"img-thumbnail"}),r=(e,t)=>Object(c.jsx)("video",{controls:!0,src:e,alt:"images",className:"img-thumbnail",style:{filter:t?"invert(1)":"invert(0)"}})},25:function(e,t,a){"use strict";a(1);var s=a(13),c=a(7),n=a(4),r=a(0);t.a=e=>{let{children:t,user:a,border:o,handleClose:l,setShowFollowers:i,setShowFollowing:d,msg:j}=e;const{theme:b}=Object(n.c)((e=>e));return Object(r.jsxs)("div",{className:"d-flex p-2 align-items-center justify-content-between w-100 ".concat(o),children:[Object(r.jsx)("div",{children:Object(r.jsxs)(c.b,{to:"/profile/".concat(a._id),onClick:()=>{l&&l(),i&&i(!1),d&&d(!1)},className:"d-flex align-items-center",children:[Object(r.jsx)(s.a,{src:a.avatar,size:"big-avatar"}),Object(r.jsxs)("div",{className:"ml-1",style:{transform:"translateY(-2px)"},children:[Object(r.jsx)("span",{className:"d-block",children:a.username}),Object(r.jsx)("small",{style:{opacity:.7},children:j?(e=>Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{style:{filter:b?"invert(1)":"invert(0)"},children:e.text}),e.media.length>0&&Object(r.jsxs)("div",{children:[e.media.length," ",Object(r.jsx)("i",{className:"fas fa-image"})]}),e.call&&Object(r.jsx)("span",{className:"material-icons",children:0===e.call.times?e.call.video?"videocam_off":"phone_disabled":e.call.video?"video_camera_front":"call"})]}))(a):a.fullname})]})]})}),t]})}},26:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c}));const s=e=>{let t="";if(!e||0===e.length)return"No files selected.";if(e.length>3)return t="You can only upload up to 3 images.",t;const a=["jpeg","jpg","png"],s=["txt","pdf"];for(let c=0;c<e.length;c++){const n=e[c];if(n.size>1048576)return t="The largest image size is 1mb.",t;const r=n.name.split(".").pop().toLowerCase();if(!a.includes(r))return t="Image format is incorrect.",t;if(s.includes(r))return t="File type not allowed.",t}return t},c=async e=>{let t=[];for(const a of e){const e=new FormData;a.camera?e.append("file",a.camera):e.append("file",a),e.append("upload_preset","xl7nhfgx"),e.append("cloud_name","arteeeuhgu");const s=await fetch("https://api.cloudinary.com/v1_1/arteeeuhgu/image/upload",{method:"POST",body:e}),c=await s.json();t.push({public_id:c.public_id,url:c.secure_url})}return t}},27:function(e,t,a){"use strict";a(1);var s=a(0);t.a=e=>{let{result:t,page:a,load:c,handleLoadMore:n}=e;return Object(s.jsx)(s.Fragment,{children:t<9*(a-1)?"":!c&&Object(s.jsx)("button",{className:"btn btn-dark mx-auto d-block",onClick:n,children:"Load more"})})}},28:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return i}));var s=a(3),c=a(5);var n=e=>{let{username:t,email:a,password:s,cf_password:c}=e;const n={};return t?t.replace(/ /g,"").length>25&&(n.username="User name is up to 25 characters long."):n.username="Please add your user name.",a?function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(a)||(n.email="Email format is incorrect."):n.email="Please add your email.",s?s.length<6&&(n.password="Password must be at least 6 characters."):n.password="Please add your password.",s!==c&&(n.cf_password="Confirm password did not match."),{errMsg:n,errLength:Object.keys(n).length}};const r=e=>async t=>{try{t({type:s.c.ALERT,payload:{loading:!0}});const a=await Object(c.d)("login",e);t({type:s.c.AUTH,payload:{token:a.data.access_token,user:a.data.user}}),localStorage.setItem("firstLogin",!0),t({type:s.c.ALERT,payload:{success:a.data.msg}})}catch(a){t({type:s.c.ALERT,payload:{error:a.response.data.msg}})}},o=()=>async e=>{if(localStorage.getItem("firstLogin")){e({type:s.c.ALERT,payload:{loading:!0}});try{const t=await Object(c.d)("refresh_token");e({type:s.c.AUTH,payload:{token:t.data.access_token,user:t.data.user}}),e({type:s.c.ALERT,payload:{}})}catch(t){e({type:s.c.ALERT,payload:{error:t.response.data.msg}})}}},l=e=>async t=>{const a=n(e);if(a.errLength>0)return t({type:s.c.ALERT,payload:a.errMsg});try{t({type:s.c.ALERT,payload:{loading:!0}});const a=await Object(c.d)("register",e);t({type:s.c.AUTH,payload:{token:a.data.access_token,user:a.data.user}}),localStorage.setItem("firstLogin",!0),t({type:s.c.ALERT,payload:{success:a.data.msg}})}catch(r){t({type:s.c.ALERT,payload:{error:r.response.data.msg}})}},i=()=>async e=>{try{localStorage.removeItem("firstLogin"),await Object(c.d)("logout"),window.location.href="/"}catch(t){e({type:s.c.ALERT,payload:{error:t.response.data.msg}})}}},29:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var s=a(3),c=a(5);const n={LOADING:"LOADING_DISCOVER",GET_POSTS:"GET_DISCOVER_POSTS",UPDATE_POST:"UPDATE_DISCOVER_POST"},r=e=>async t=>{try{t({type:n.LOADING,payload:!0});const a=await Object(c.b)("post_discover",e);t({type:n.GET_POSTS,payload:a.data}),t({type:n.LOADING,payload:!1})}catch(a){t({type:s.c.ALERT,payload:{error:a.response.data.msg}})}}},3:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return n}));const s={AUTH:"AUTH",ALERT:"ALERT",THEME:"THEME",STATUS:"STATUS",MODAL:"MODAL",SOCKET:"SOCKET",ONLINE:"ONLINE",OFFLINE:"OFFLINE",CALL:"CALL"},c=(e,t,a)=>e.map((e=>e._id===t?a:e)),n=(e,t)=>e.filter((e=>e._id!==t))},31:function(e,t,a){"use strict";a(1);var s=a(7),c=a(4),n=a(0);t.a=e=>{let{posts:t,result:a}=e;const{theme:r}=Object(c.c)((e=>e));return 0===a?Object(n.jsx)("h2",{className:"text-center text-danger",children:"No Post"}):Object(n.jsx)("div",{className:"post_thumb",children:t.map((e=>Object(n.jsx)(s.b,{to:"/post/".concat(e._id),children:Object(n.jsxs)("div",{className:"post_thumb_display",children:[e.images[0].url.match(/video/i)?Object(n.jsx)("video",{controls:!0,src:e.images[0].url,alt:e.images[0].url,style:{filter:r?"invert(1)":"invert(0)"}}):Object(n.jsx)("img",{src:e.images[0].url,alt:e.images[0].url,style:{filter:r?"invert(1)":"invert(0)"}}),Object(n.jsxs)("div",{className:"post_thumb_menu",children:[Object(n.jsx)("i",{className:"far fa-heart",children:e.likes.length}),Object(n.jsx)("i",{className:"far fa-comment",children:e.comments.length})]})]})},e._id)))})}},33:function(e,t,a){"use strict";a(1);var s=a(0);t.a=e=>{let{setContent:t,content:a,theme:c}=e;return Object(s.jsxs)("div",{className:"nav-item dropdown",style:{opacity:1,filter:c?"invert(1)":"invert(0)"},children:[Object(s.jsx)("span",{className:"nav-link position-relative px-1",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(s.jsx)("span",{style:{opacity:.4},children:"\ud83d\ude04"})}),Object(s.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:Object(s.jsx)("div",{className:"reactions",children:["\u2764\ufe0f","\ud83d\ude06","\ud83d\ude2f","\ud83d\ude22","\ud83d\ude21","\ud83d\udc4d","\ud83d\udc4e","\ud83d\ude04","\ud83d\ude02","\ud83d\ude0d","\ud83d\ude18","\ud83d\ude17","\ud83d\ude1a","\ud83d\ude33","\ud83d\ude2d","\ud83d\ude13","\ud83d\ude24","\ud83e\udd24","\ud83d\udc7b","\ud83d\udc80","\ud83e\udd10","\ud83d\ude34","\ud83d\ude37","\ud83d\ude35"].map((e=>Object(s.jsx)("span",{onClick:()=>t(a+e),children:e},e)))})})]})}},41:function(e,t,a){"use strict";a.r(t);a(1);var s=a(48),c=a(0);t.default=()=>Object(c.jsxs)("div",{className:"message d-flex",children:[Object(c.jsx)("div",{className:"col-md-4 border-right px-0",children:Object(c.jsx)(s.a,{})}),Object(c.jsx)("div",{className:"col-md-8 px-0 right_mess",children:Object(c.jsxs)("div",{className:"d-flex justify-content-center  align-items-center flex-column h-100",children:[Object(c.jsx)("i",{className:"fab fa-facebook-messenger text-primary",style:{fontSize:"5rem"}}),Object(c.jsx)("h4",{children:"Messenger"})]})})]})},45:function(e,t,a){"use strict";a.r(t);var s=a(2),c=a(1),n=a(11),r=a(7),o=a(28),l=a(4),i=a(0);t.default=()=>{const[e,t]=Object(c.useState)({email:"",password:""}),{email:a,password:d}=e,[j,b]=Object(c.useState)(!1),{auth:u}=Object(l.c)((e=>e)),m=Object(l.b)(),O=Object(n.f)();Object(c.useEffect)((()=>{u.token&&O.push("/")}),[u.token,O]);const p=a=>{const{name:c,value:n}=a.target;t(Object(s.a)(Object(s.a)({},e),{},{[c]:n}))};return Object(i.jsx)("div",{className:"auth_page",children:Object(i.jsxs)("form",{onSubmit:t=>{t.preventDefault(),m(Object(o.a)(e))},children:[Object(i.jsx)("h3",{className:"text-uppercase text-center mb-4",children:"V-Network"}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(i.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1",name:"email","aria-describedby":"emailHelp",onChange:p,value:a}),Object(i.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(i.jsxs)("div",{className:"pass",children:[Object(i.jsx)("input",{type:j?"text":"password",className:"form-control",id:"exampleInputPassword1",onChange:p,value:d,name:"password"}),Object(i.jsx)("small",{onClick:()=>b(!j),children:j?"Hide":"Show"})]})]}),Object(i.jsx)("button",{type:"submit",className:"btn btn-dark w-100",disabled:!a||!d,children:"Login"}),Object(i.jsxs)("p",{className:"my-2",children:["You don't have an account? ",Object(i.jsx)(r.b,{to:"/register",style:{color:"crimson"},children:"Register Now"})]})]})})}},46:function(e,t,a){"use strict";a.r(t);var s=a(2),c=a(1),n=a(4),r=a(11),o=a(7),l=a(28),i=a(0);t.default=()=>{const{auth:e,alert:t}=Object(n.c)((e=>e)),a=Object(n.b)(),d=Object(r.f)(),[j,b]=Object(c.useState)({fullname:"",username:"",email:"",password:"",cf_password:"",gender:"male"}),{fullname:u,username:m,email:O,password:p,cf_password:h}=j,[f,x]=Object(c.useState)(!1),[y,g]=Object(c.useState)(!1);Object(c.useEffect)((()=>{e.token&&d.push("/")}),[e.token,d]);const v=e=>{const{name:t,value:a}=e.target;b(Object(s.a)(Object(s.a)({},j),{},{[t]:a}))};return Object(i.jsx)("div",{className:"auth_page",children:Object(i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(Object(l.d)(j))},children:[Object(i.jsx)("h3",{className:"text-uppercase text-center mb-4",children:"V-Network"}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"fullname",children:"Full Name"}),Object(i.jsx)("input",{type:"text",className:"form-control",id:"fullname",name:"fullname",onChange:v,value:u,style:{background:"".concat(t.fullname?"#fd2d6a14":"")}}),Object(i.jsx)("small",{className:"form-text text-danger",children:t.fullname?t.fullname:""})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"username",children:"User Name"}),Object(i.jsx)("input",{type:"text",className:"form-control",id:"username",name:"username",onChange:v,value:m.toLowerCase().replace(/ /g,""),style:{background:"".concat(t.username?"#fd2d6a14":"")}}),Object(i.jsx)("small",{className:"form-text text-danger",children:t.username?t.username:""})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(i.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1",name:"email",onChange:v,value:O,style:{background:"".concat(t.email?"#fd2d6a14":"")}}),Object(i.jsx)("small",{className:"form-text text-danger",children:t.email?t.email:""})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(i.jsxs)("div",{className:"pass",children:[Object(i.jsx)("input",{type:f?"text":"password",className:"form-control",id:"exampleInputPassword1",onChange:v,value:p,name:"password",style:{background:"".concat(t.password?"#fd2d6a14":"")}}),Object(i.jsx)("small",{onClick:()=>x(!f),children:f?"Hide":"Show"})]}),Object(i.jsx)("small",{className:"form-text text-danger",children:t.password?t.password:""})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"cf_password",children:"Confirm Password"}),Object(i.jsxs)("div",{className:"pass",children:[Object(i.jsx)("input",{type:y?"text":"password",className:"form-control",id:"cf_password",onChange:v,value:h,name:"cf_password",style:{background:"".concat(t.cf_password?"#fd2d6a14":"")}}),Object(i.jsx)("small",{onClick:()=>g(!y),children:y?"Hide":"Show"})]}),Object(i.jsx)("small",{className:"form-text text-danger",children:t.cf_password?t.cf_password:""})]}),Object(i.jsxs)("div",{className:"row justify-content-between mx-0 mb-1",children:[Object(i.jsxs)("label",{htmlFor:"male",children:["Male: ",Object(i.jsx)("input",{type:"radio",id:"male",name:"gender",value:"male",defaultChecked:!0,onChange:v})]}),Object(i.jsxs)("label",{htmlFor:"female",children:["Female: ",Object(i.jsx)("input",{type:"radio",id:"female",name:"gender",value:"female",onChange:v})]}),Object(i.jsxs)("label",{htmlFor:"other",children:["Other: ",Object(i.jsx)("input",{type:"radio",id:"other",name:"gender",value:"other",onChange:v})]})]}),Object(i.jsx)("button",{type:"submit",className:"btn btn-dark w-100",children:"Register"}),Object(i.jsxs)("p",{className:"my-2",children:["Already have an account? ",Object(i.jsx)(o.b,{to:"/",style:{color:"crimson"},children:"Login Now"})]})]})})}},47:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(13),n=a(4),r=a(3),o=a(0);var l=()=>{const{auth:e}=Object(n.c)((e=>e)),t=Object(n.b)();return Object(o.jsxs)("div",{className:"status my-3 d-flex",children:[Object(o.jsx)(c.a,{src:e.user.avatar,size:"big-avatar"}),Object(o.jsxs)("button",{className:"statusBtn flex-fill",onClick:()=>t({type:r.c.STATUS,payload:!0}),children:[e.user.username,", what are you thinking?"]})]})},i=a(2),d=a(49),j=a(12),b=a(27),u=a(5),m=a(6);var O=()=>{const{homePosts:e,auth:t,theme:a}=Object(n.c)((e=>e)),c=Object(n.b)(),[r,l]=Object(s.useState)(!1);return Object(o.jsxs)("div",{className:"post_thumb",children:[e.posts.map((e=>Object(o.jsx)(d.a,{post:e,theme:a},e._id))),r&&Object(o.jsx)("img",{src:j.a,alt:"loading",className:"d-block mx-auto"}),Object(o.jsx)(b.a,{result:e.result,page:e.page,load:r,handleLoadMore:async()=>{l(!0);const a=await Object(u.b)("posts?limit=".concat(9*e.page),t.token);c({type:m.a.GET_POSTS,payload:Object(i.a)(Object(i.a)({},a.data),{},{page:e.page+1})}),l(!1)}})]})};let p=0;t.default=()=>{const{homePosts:e}=Object(n.c)((e=>e));return window.addEventListener("scroll",(()=>{if("/"===window.location.pathname)return p=window.pageYOffset,p})),Object(s.useEffect)((()=>{setTimeout((()=>{window.scrollTo({top:p,behavior:"smooth"})}),100)}),[]),Object(o.jsxs)("div",{className:"home mx-0",children:[Object(o.jsx)(l,{}),e.loading?Object(o.jsx)("img",{src:j.a,alt:"loading",className:"d-block mx-auto"}):0===e.result&&0===e.posts.length?Object(o.jsx)("h2",{className:"text-center",children:"No Post"}):Object(o.jsx)(O,{})]})}},48:function(e,t,a){"use strict";var s=a(2),c=a(1),n=a(25),r=a(4),o=a(5),l=a(3),i=a(11),d=a(10),j=a(0);t.a=()=>{const{auth:e,message:t,online:a}=Object(r.c)((e=>e)),b=Object(r.b)(),[u,m]=Object(c.useState)(""),[O,p]=Object(c.useState)([]),h=Object(i.f)(),{id:f}=Object(i.h)(),x=Object(c.useRef)(),[y,g]=Object(c.useState)(0),v=e=>(m(""),p([]),b({type:d.a.ADD_USER,payload:Object(s.a)(Object(s.a)({},e),{},{text:"",media:[]})}),b({type:d.a.CHECK_ONLINE_OFFLINE,payload:a}),h.push("/message/".concat(e._id))),E=e=>f===e._id?"active":"";return Object(c.useEffect)((()=>{t.firstLoad||b(Object(d.e)({auth:e}))}),[b,e,t.firstLoad]),Object(c.useEffect)((()=>{new IntersectionObserver((e=>{e[0].isIntersecting&&g((e=>e+1))}),{threshold:.1}).observe(x.current)}),[g]),Object(c.useEffect)((()=>{t.resultUsers>=9*(y-1)&&y>1&&b(Object(d.e)({auth:e,page:y}))}),[t.resultUsers,y,e,b]),Object(c.useEffect)((()=>{t.firstLoad&&b({type:d.a.CHECK_ONLINE_OFFLINE,payload:a})}),[a,t.firstLoad,b]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:"message_header",onSubmit:async t=>{if(t.preventDefault(),!u)return p([]);try{const t=await Object(o.b)("search?username=".concat(u),e.token);p(t.data.users)}catch(a){b({type:l.c.ALERT,payload:{error:a.response.data.msg}})}},children:[Object(j.jsx)("input",{type:"text",value:u,placeholder:"Enter to Search...",onChange:e=>m(e.target.value)}),Object(j.jsx)("button",{type:"submit",style:{display:"none"},children:"Search"})]}),Object(j.jsxs)("div",{className:"message_chat_list",children:[0!==O.length?Object(j.jsx)(j.Fragment,{children:O.map((e=>Object(j.jsx)("div",{className:"message_user ".concat(E(e)),onClick:()=>v(e),children:Object(j.jsx)(n.a,{user:e})},e._id)))}):Object(j.jsx)(j.Fragment,{children:t.users.map((t=>Object(j.jsx)("div",{className:"message_user ".concat(E(t)),onClick:()=>v(t),children:Object(j.jsx)(n.a,{user:t,msg:!0,children:t.online?Object(j.jsx)("i",{className:"fas fa-circle text-success"}):e.user.following.find((e=>e._id===t._id))&&Object(j.jsx)("i",{className:"fas fa-circle"})})},t._id)))}),Object(j.jsx)("button",{ref:x,style:{opacity:0},children:"Load More"})]})]})}},49:function(e,t,a){"use strict";var s=a(1),c=a(2),n=a(13),r=a(11),o=a(7),l=a(4),i=a(32),d=a.n(i),j=a(3),b=a(6);const u="https://v-network-devat.herokuapp.com";var m=a(0);var O=e=>{let{post:t}=e;const{auth:a,socket:s}=Object(l.c)((e=>e)),i=Object(l.b)(),O=Object(r.f)();return Object(m.jsxs)("div",{className:"card_header",children:[Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)(n.a,{src:t.user.avatar,size:"big-avatar"}),Object(m.jsxs)("div",{className:"card_name",children:[Object(m.jsx)("h6",{className:"m-0",children:Object(m.jsx)(o.b,{to:"/profile/".concat(t.user._id),className:"text-dark",children:t.user.username})}),Object(m.jsx)("small",{className:"text-muted",children:d()(t.createdAt).fromNow()})]})]}),Object(m.jsxs)("div",{className:"nav-item dropdown",children:[Object(m.jsx)("span",{className:"material-icons",id:"moreLink","data-toggle":"dropdown",children:"more_horiz"}),Object(m.jsxs)("div",{className:"dropdown-menu",children:[a.user._id===t.user._id&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dropdown-item",onClick:()=>{i({type:j.c.STATUS,payload:Object(c.a)(Object(c.a)({},t),{},{onEdit:!0})})},children:[Object(m.jsx)("span",{className:"material-icons",children:"create"})," Edit Post"]}),Object(m.jsxs)("div",{className:"dropdown-item",onClick:()=>{if(window.confirm("Are you sure want to delete this post?"))return i(Object(b.c)({post:t,auth:a,socket:s})),O.push("/")},children:[Object(m.jsx)("span",{className:"material-icons",children:"delete_outline"})," Remove Post"]})]}),Object(m.jsxs)("div",{className:"dropdown-item",onClick:()=>{navigator.clipboard.writeText("".concat(u,"/post/").concat(t._id))},children:[Object(m.jsx)("span",{className:"material-icons",children:"content_copy"})," Copy Link"]})]})]})]})};var p=e=>{let{images:t,id:a}=e;const s=e=>{if(0===e)return"active"},{theme:c}=Object(l.c)((e=>e));return Object(m.jsxs)("div",{id:"image".concat(a),className:"carousel slide","data-ride":"carousel",children:[Object(m.jsx)("ol",{className:"carousel-indicators",style:{zIndex:1},children:t.map(((e,t)=>Object(m.jsx)("li",{"data-target":"#image".concat(a),"data-slide-to":t,className:s(t)},t)))}),Object(m.jsx)("div",{className:"carousel-inner",children:t.map(((e,t)=>Object(m.jsx)("div",{className:"carousel-item ".concat(s(t)),children:e.url.match(/video/i)?Object(m.jsx)("video",{controls:!0,src:e.url,className:"d-block w-100",alt:e.url,style:{filter:c?"invert(1)":"invert(0)"}}):Object(m.jsx)("img",{src:e.url,className:"d-block w-100",alt:e.url,style:{filter:c?"invert(1)":"invert(0)"}})},t)))}),t.length>1&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("a",{className:"carousel-control-prev",href:"#image".concat(a),role:"button","data-slide":"prev",style:{width:"5%"},children:[Object(m.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(m.jsx)("span",{className:"sr-only",children:"Previous"})]}),Object(m.jsxs)("a",{className:"carousel-control-next",href:"#image".concat(a),role:"button","data-slide":"next",style:{width:"5%"},children:[Object(m.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(m.jsx)("span",{className:"sr-only",children:"Next"})]})]})]})};var h=e=>{let{post:t,theme:a}=e;const[c,n]=Object(s.useState)(!1);return Object(m.jsxs)("div",{className:"card_body",children:[Object(m.jsxs)("div",{className:"card_body-content",style:{filter:a?"invert(1)":"invert(0)",color:a?"white":"#111"},children:[Object(m.jsx)("span",{children:t.content.length<60?t.content:c?t.content+" ":t.content.slice(0,60)+"....."}),t.content.length>60&&Object(m.jsx)("span",{className:"readMore",onClick:()=>n(!c),children:c?"Hide content":"Read more"})]}),t.images.length>0&&Object(m.jsx)(p,{images:t.images,id:t._id})]})},f=a.p+"static/media/send.fab9d966.svg";var x=e=>{let{isLike:t,handleLike:a,handleUnLike:s}=e;const{theme:c}=Object(l.c)((e=>e));return Object(m.jsx)(m.Fragment,{children:t?Object(m.jsx)("i",{className:"fas fa-heart text-danger",onClick:s,style:{filter:c?"invert(1)":"invert(0)"}}):Object(m.jsx)("i",{className:"far fa-heart",onClick:a})})},y=a(144),g=a(145),v=a(146),E=a(147),N=a(148),_=a(149),w=a(150),T=a(151),S=a(152),k=a(153),A=a(154),L=a(155);var C=e=>{let{url:t,theme:a}=e;return Object(m.jsxs)("div",{className:"d-flex justify-content-between px-4 py-2",style:{filter:a?"invert(1)":"invert(0)"},children:[Object(m.jsx)(y.a,{url:t,children:Object(m.jsx)(g.a,{round:!0,size:32})}),Object(m.jsx)(v.a,{url:t,children:Object(m.jsx)(E.a,{round:!0,size:32})}),Object(m.jsx)(N.a,{url:t,children:Object(m.jsx)(_.a,{round:!0,size:32})}),Object(m.jsx)(w.a,{url:t,children:Object(m.jsx)(T.a,{round:!0,size:32})}),Object(m.jsx)(S.a,{url:t,children:Object(m.jsx)(k.a,{round:!0,size:32})}),Object(m.jsx)(A.a,{url:t,children:Object(m.jsx)(L.a,{round:!0,size:32})})]})};var D=e=>{let{post:t}=e;const[a,c]=Object(s.useState)(!1),[n,r]=Object(s.useState)(!1),[i,d]=Object(s.useState)(!1),{auth:j,theme:O,socket:p}=Object(l.c)((e=>e)),h=Object(l.b)(),[y,g]=Object(s.useState)(!1),[v,E]=Object(s.useState)(!1);Object(s.useEffect)((()=>{t.likes.find((e=>e._id===j.user._id))?c(!0):c(!1)}),[t.likes,j.user._id]);Object(s.useEffect)((()=>{j.user.saved.find((e=>e===t._id))?g(!0):g(!1)}),[j.user.saved,t._id]);return Object(m.jsxs)("div",{className:"card_footer",children:[Object(m.jsxs)("div",{className:"card_icon_menu",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(x,{isLike:a,handleLike:async()=>{n||(r(!0),await h(Object(b.f)({post:t,auth:j,socket:p})),r(!1))},handleUnLike:async()=>{n||(r(!0),await h(Object(b.h)({post:t,auth:j,socket:p})),r(!1))}}),Object(m.jsx)(o.b,{to:"/post/".concat(t._id),className:"text-dark",children:Object(m.jsx)("i",{className:"far fa-comment"})}),Object(m.jsx)("img",{src:f,alt:"Send",onClick:()=>d(!i)})]}),y?Object(m.jsx)("i",{className:"fas fa-bookmark text-info",onClick:async()=>{v||(E(!0),await h(Object(b.i)({post:t,auth:j})),E(!1))}}):Object(m.jsx)("i",{className:"far fa-bookmark",onClick:async()=>{v||(E(!0),await h(Object(b.g)({post:t,auth:j})),E(!1))}})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsxs)("h6",{style:{padding:"0 25px",cursor:"pointer"},children:[t.likes.length," likes"]}),Object(m.jsxs)("h6",{style:{padding:"0 25px",cursor:"pointer"},children:[t.comments.length," comments"]})]}),i&&Object(m.jsx)(C,{url:"".concat(u,"/post/").concat(t._id),theme:O})]})},I=a(5),R=a(8);var P=e=>{let{post:t,comment:a,setOnEdit:s}=e;const{auth:n,socket:r}=Object(l.c)((e=>e)),o=Object(l.b)(),i=()=>{t.user._id!==n.user._id&&a.user._id!==n.user._id||o((e=>{let{post:t,comment:a,auth:s,socket:n}=e;return async e=>{const r=[...t.comments.filter((e=>e.reply===a._id)),a],o=Object(c.a)(Object(c.a)({},t),{},{comments:t.comments.filter((e=>!r.find((t=>e._id===t._id))))});e({type:b.a.UPDATE_POST,payload:o}),n.emit("deleteComment",o);try{r.forEach((c=>{Object(I.a)("comment/".concat(c._id),s.token);const r={id:c._id,text:a.reply?"mentioned you in a comment.":"has commented on your post.",recipients:a.reply?[a.tag._id]:[t.user._id],url:"/post/".concat(t._id)};e(Object(R.f)({msg:r,auth:s,socket:n}))}))}catch(l){e({type:j.c.ALERT,payload:{error:l.response.data.msg}})}}})({post:t,auth:n,comment:a,socket:r}))},d=()=>Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dropdown-item",onClick:()=>s(!0),children:[Object(m.jsx)("span",{className:"material-icons",children:"create"})," Edit"]}),Object(m.jsxs)("div",{className:"dropdown-item",onClick:i,children:[Object(m.jsx)("span",{className:"material-icons",children:"delete_outline"})," Remove"]})]});return Object(m.jsx)("div",{className:"menu",children:(t.user._id===n.user._id||a.user._id===n.user._id)&&Object(m.jsxs)("div",{className:"nav-item dropdown",children:[Object(m.jsx)("span",{className:"material-icons",id:"moreLink","data-toggle":"dropdown",children:"more_vert"}),Object(m.jsx)("div",{className:"dropdown-menu","aria-labelledby":"moreLink",children:t.user._id===n.user._id?a.user._id===n.user._id?d():Object(m.jsxs)("div",{className:"dropdown-item",onClick:i,children:[Object(m.jsx)("span",{className:"material-icons",children:"delete_outline"})," Remove"]}):a.user._id===n.user._id&&d()})]})})},U=a(33);var F=e=>{let{children:t,post:a,onReply:n,setOnReply:r}=e;const[o,i]=Object(s.useState)(""),{auth:d,socket:u,theme:O}=Object(l.c)((e=>e)),p=Object(l.b)();return Object(m.jsxs)("form",{className:"card-footer comment_input",onSubmit:e=>{if(e.preventDefault(),!o.trim())return r?r(!1):void 0;i("");const t={content:o,likes:[],user:d.user,createdAt:(new Date).toISOString(),reply:n&&n.commentId,tag:n&&n.user};return p((e=>{let{post:t,newComment:a,auth:s,socket:n}=e;return async e=>{const r=Object(c.a)(Object(c.a)({},t),{},{comments:[...t.comments,a]});e({type:b.a.UPDATE_POST,payload:r});try{const r=Object(c.a)(Object(c.a)({},a),{},{postId:t._id,postUserId:t.user._id}),o=await Object(I.d)("comment",r,s.token),l=Object(c.a)(Object(c.a)({},o.data.newComment),{},{user:s.user}),i=Object(c.a)(Object(c.a)({},t),{},{comments:[...t.comments,l]});e({type:b.a.UPDATE_POST,payload:i}),n.emit("createComment",i);const d={id:o.data.newComment._id,text:a.reply?"mentioned you in a comment.":"has commented on your post.",recipients:a.reply?[a.tag._id]:[t.user._id],url:"/post/".concat(t._id),content:t.content,image:t.images[0].url};e(Object(R.b)({msg:d,auth:s,socket:n}))}catch(o){e({type:j.c.ALERT,payload:{error:o.response.data.msg}})}}})({post:a,newComment:t,auth:d,socket:u})),r?r(!1):void 0},children:[t,Object(m.jsx)("input",{type:"text",placeholder:"Add your comments...",value:o,onChange:e=>i(e.target.value),style:{filter:O?"invert(1)":"invert(0)",color:O?"white":"#111",background:O?"rgba(0,0,0,.03)":""}}),Object(m.jsx)(U.a,{setContent:i,content:o,theme:O}),Object(m.jsx)("button",{type:"submit",className:"postBtn",children:"Post"})]})};var G=e=>{let{children:t,comment:a,post:r,commentId:i}=e;const{auth:u,theme:O}=Object(l.c)((e=>e)),p=Object(l.b)(),[h,f]=Object(s.useState)(""),[y,g]=Object(s.useState)(!1),[v,E]=Object(s.useState)(!1),[N,_]=Object(s.useState)(!1),[w,T]=Object(s.useState)(!1),[S,k]=Object(s.useState)(!1);Object(s.useEffect)((()=>{f(a.content),_(!1),k(!1),a.likes.find((e=>e._id===u.user._id))&&_(!0)}),[a,u.user._id]);const A={opacity:a._id?1:.5,pointerEvents:a._id?"inherit":"none"};return Object(m.jsxs)("div",{className:"comment_card mt-2",style:A,children:[Object(m.jsxs)(o.b,{to:"/profile/".concat(a.user._id),className:"d-flex text-dark",children:[Object(m.jsx)(n.a,{src:a.user.avatar,size:"small-avatar"}),Object(m.jsx)("h6",{className:"mx-1",children:a.user.username})]}),Object(m.jsxs)("div",{className:"comment_content",children:[Object(m.jsxs)("div",{className:"flex-fill",style:{filter:O?"invert(1)":"invert(0)",color:O?"white":"#111"},children:[v?Object(m.jsx)("textarea",{rows:"5",value:h,onChange:e=>f(e.target.value)}):Object(m.jsxs)("div",{children:[a.tag&&a.tag._id!==a.user._id&&Object(m.jsxs)(o.b,{to:"/profile/".concat(a.tag._id),className:"mr-1",children:["@",a.tag.username]}),Object(m.jsx)("span",{children:h.length<100?h:y?h+" ":h.slice(0,100)+"...."}),h.length>100&&Object(m.jsx)("span",{className:"readMore",onClick:()=>g(!y),children:y?"Hide content":"Read more"})]}),Object(m.jsxs)("div",{style:{cursor:"pointer"},children:[Object(m.jsx)("small",{className:"text-muted mr-3",children:d()(a.createdAt).fromNow()}),Object(m.jsxs)("small",{className:"font-weight-bold mr-3",children:[a.likes.length," likes"]}),v?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("small",{className:"font-weight-bold mr-3",onClick:()=>{a.content!==h?(p((e=>{let{comment:t,post:a,content:s,auth:n}=e;return async e=>{const r=Object(j.b)(a.comments,t._id,Object(c.a)(Object(c.a)({},t),{},{content:s})),o=Object(c.a)(Object(c.a)({},a),{},{comments:r});e({type:b.a.UPDATE_POST,payload:o});try{Object(I.c)("comment/".concat(t._id),{content:s},n.token)}catch(l){e({type:j.c.ALERT,payload:{error:l.response.data.msg}})}}})({comment:a,post:r,content:h,auth:u})),E(!1)):E(!1)},children:"update"}),Object(m.jsx)("small",{className:"font-weight-bold mr-3",onClick:()=>E(!1),children:"cancel"})]}):Object(m.jsx)("small",{className:"font-weight-bold mr-3",onClick:()=>{if(S)return k(!1);k(Object(c.a)(Object(c.a)({},a),{},{commentId:i}))},children:S?"cancel":"reply"})]})]}),Object(m.jsxs)("div",{className:"d-flex align-items-center mx-2",style:{cursor:"pointer"},children:[Object(m.jsx)(P,{post:r,comment:a,setOnEdit:E}),Object(m.jsx)(x,{isLike:N,handleLike:async()=>{w||(_(!0),T(!0),await p((e=>{let{comment:t,post:a,auth:s}=e;return async e=>{const n=Object(c.a)(Object(c.a)({},t),{},{likes:[...t.likes,s.user]}),r=Object(j.b)(a.comments,t._id,n),o=Object(c.a)(Object(c.a)({},a),{},{comments:r});e({type:b.a.UPDATE_POST,payload:o});try{await Object(I.c)("comment/".concat(t._id,"/like"),null,s.token)}catch(l){e({type:j.c.ALERT,payload:{error:l.response.data.msg}})}}})({comment:a,post:r,auth:u})),T(!1))},handleUnLike:async()=>{w||(_(!1),T(!0),await p((e=>{let{comment:t,post:a,auth:s}=e;return async e=>{const n=Object(c.a)(Object(c.a)({},t),{},{likes:Object(j.a)(t.likes,s.user._id)}),r=Object(j.b)(a.comments,t._id,n),o=Object(c.a)(Object(c.a)({},a),{},{comments:r});e({type:b.a.UPDATE_POST,payload:o});try{await Object(I.c)("comment/".concat(t._id,"/unlike"),null,s.token)}catch(l){e({type:j.c.ALERT,payload:{error:l.response.data.msg}})}}})({comment:a,post:r,auth:u})),T(!1))}})]})]}),S&&Object(m.jsx)(F,{post:r,onReply:S,setOnReply:k,children:Object(m.jsxs)(o.b,{to:"/profile/".concat(S.user._id),className:"mr-1",children:["@",S.user.username,":"]})}),t]})};var M=e=>{let{comment:t,post:a,replyCm:c}=e;const[n,r]=Object(s.useState)([]),[o,l]=Object(s.useState)(1);return Object(s.useEffect)((()=>{r(c.slice(c.length-o))}),[c,o]),Object(m.jsx)("div",{className:"comment_display",children:Object(m.jsx)(G,{comment:t,post:a,commentId:t._id,children:Object(m.jsxs)("div",{className:"pl-4",children:[n.map(((e,s)=>e.reply&&Object(m.jsx)(G,{comment:e,post:a,commentId:t._id},s))),c.length-o>0?Object(m.jsx)("div",{style:{cursor:"pointer",color:"crimson"},onClick:()=>l(o+10),children:"See more comments..."}):c.length>1&&Object(m.jsx)("div",{style:{cursor:"pointer",color:"crimson"},onClick:()=>l(1),children:"Hide comments..."})]})})})};var H=e=>{let{post:t}=e;const[a,c]=Object(s.useState)([]),[n,r]=Object(s.useState)([]),[o,l]=Object(s.useState)(2),[i,d]=Object(s.useState)([]);return Object(s.useEffect)((()=>{const e=t.comments.filter((e=>!e.reply));c(e),r(e.slice(e.length-o))}),[t.comments,o]),Object(s.useEffect)((()=>{const e=t.comments.filter((e=>e.reply));d(e)}),[t.comments]),Object(m.jsxs)("div",{className:"comments",children:[n.map(((e,a)=>Object(m.jsx)(M,{comment:e,post:t,replyCm:i.filter((t=>t.reply===e._id))},a))),a.length-o>0?Object(m.jsx)("div",{className:"p-2 border-top",style:{cursor:"pointer",color:"crimson"},onClick:()=>l(o+10),children:"See more comments..."}):a.length>2&&Object(m.jsx)("div",{className:"p-2 border-top",style:{cursor:"pointer",color:"crimson"},onClick:()=>l(2),children:"Hide comments..."})]})};t.a=e=>{let{post:t,theme:a}=e;return Object(m.jsxs)("div",{className:"card my-3",children:[Object(m.jsx)(O,{post:t}),Object(m.jsx)(h,{post:t,theme:a}),Object(m.jsx)(D,{post:t}),Object(m.jsx)(H,{post:t}),Object(m.jsx)(F,{post:t})]})}},5:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l}));var s=a(35),c=a.n(s);const n=async(e,t)=>await c.a.get("/api/".concat(e),{headers:{Authorization:t}}),r=async(e,t,a)=>await c.a.post("/api/".concat(e),t,{headers:{Authorization:a}}),o=async(e,t,a)=>await c.a.patch("/api/".concat(e),t,{headers:{Authorization:a}}),l=async(e,t)=>await c.a.delete("/api/".concat(e),{headers:{Authorization:t}})},58:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(4),n=a(29),r=a(12),o=a(31),l=a(27),i=a(5),d=a(0);t.default=()=>{const{auth:e,discover:t}=Object(c.c)((e=>e)),a=Object(c.b)(),[j,b]=Object(s.useState)(!1);Object(s.useEffect)((()=>{t.firstLoad||a(Object(n.b)(e.token))}),[a,e.token,t.firstLoad]);return Object(d.jsxs)("div",{children:[t.loading?Object(d.jsx)("img",{src:r.a,alt:"loading",className:"d-block mx-auto my-4"}):Object(d.jsx)(o.a,{posts:t.posts,result:t.result}),j&&Object(d.jsx)("img",{src:r.a,alt:"loading",className:"d-block mx-auto"}),!t.loading&&Object(d.jsx)(l.a,{result:t.result,page:t.page,load:j,handleLoadMore:async()=>{b(!0);const s=await Object(i.b)("post_discover?num=".concat(9*t.page),e.token);a({type:n.a.UPDATE_POST,payload:s.data}),b(!1)}})]})}},6:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return d})),a.d(t,"j",(function(){return j})),a.d(t,"f",(function(){return b})),a.d(t,"h",(function(){return u})),a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return O})),a.d(t,"g",(function(){return p})),a.d(t,"i",(function(){return h}));var s=a(2),c=a(3),n=a(26),r=a(5),o=a(8);const l={CREATE_POST:"CREATE_POST",LOADING_POST:"LOADING_POST",GET_POSTS:"GET_POSTS",UPDATE_POST:"UPDATE_POST",GET_POST:"GET_POST",DELETE_POST:"DELETE_POST"},i=e=>{let{content:t,images:a,auth:i,socket:d}=e;return async e=>{let j=[];try{e({type:c.c.ALERT,payload:{loading:!0}}),a.length>0&&(j=await Object(n.b)(a));const b=await Object(r.d)("posts",{content:t,images:j},i.token);e({type:l.CREATE_POST,payload:Object(s.a)(Object(s.a)({},b.data.newPost),{},{user:i.user})}),e({type:c.c.ALERT,payload:{loading:!1}});const u={id:b.data.newPost._id,text:"added a new post.",recipients:b.data.newPost.user.followers,url:"/post/".concat(b.data.newPost._id),content:t,image:j[0].url};e(Object(o.b)({msg:u,auth:i,socket:d}))}catch(b){e({type:c.c.ALERT,payload:{error:b.response.data.msg}})}}},d=e=>async t=>{try{t({type:l.LOADING_POST,payload:!0});const a=await Object(r.b)("posts",e);t({type:l.GET_POSTS,payload:Object(s.a)(Object(s.a)({},a.data),{},{page:2})}),t({type:l.LOADING_POST,payload:!1})}catch(a){t({type:c.c.ALERT,payload:{error:a.response.data.msg}})}},j=e=>{let{content:t,images:a,auth:s,status:o}=e;return async e=>{let i=[];const d=a.filter((e=>!e.url)),j=a.filter((e=>e.url));if(o.content!==t||0!==d.length||j.length!==o.images.length)try{e({type:c.c.ALERT,payload:{loading:!0}}),d.length>0&&(i=await Object(n.b)(d));const a=await Object(r.c)("post/".concat(o._id),{content:t,images:[...j,...i]},s.token);e({type:l.UPDATE_POST,payload:a.data.newPost}),e({type:c.c.ALERT,payload:{success:a.data.msg}})}catch(b){e({type:c.c.ALERT,payload:{error:b.response.data.msg}})}}},b=e=>{let{post:t,auth:a,socket:n}=e;return async e=>{const i=Object(s.a)(Object(s.a)({},t),{},{likes:[...t.likes,a.user]});e({type:l.UPDATE_POST,payload:i}),n.emit("likePost",i);try{await Object(r.c)("post/".concat(t._id,"/like"),null,a.token);const s={id:a.user._id,text:"like your post.",recipients:[t.user._id],url:"/post/".concat(t._id),content:t.content,image:t.images[0].url};e(Object(o.b)({msg:s,auth:a,socket:n}))}catch(d){e({type:c.c.ALERT,payload:{error:d.response.data.msg}})}}},u=e=>{let{post:t,auth:a,socket:n}=e;return async e=>{const i=Object(s.a)(Object(s.a)({},t),{},{likes:t.likes.filter((e=>e._id!==a.user._id))});e({type:l.UPDATE_POST,payload:i}),n.emit("unLikePost",i);try{await Object(r.c)("post/".concat(t._id,"/unlike"),null,a.token);const s={id:a.user._id,text:"like your post.",recipients:[t.user._id],url:"/post/".concat(t._id)};e(Object(o.f)({msg:s,auth:a,socket:n}))}catch(d){e({type:c.c.ALERT,payload:{error:d.response.data.msg}})}}},m=e=>{let{detailPost:t,id:a,auth:s}=e;return async e=>{if(t.every((e=>e._id!==a)))try{const t=await Object(r.b)("post/".concat(a),s.token);e({type:l.GET_POST,payload:t.data.post})}catch(n){e({type:c.c.ALERT,payload:{error:n.response.data.msg}})}}},O=e=>{let{post:t,auth:a,socket:s}=e;return async e=>{e({type:l.DELETE_POST,payload:t});try{const c=await Object(r.a)("post/".concat(t._id),a.token),n={id:t._id,text:"added a new post.",recipients:c.data.newPost.user.followers,url:"/post/".concat(t._id)};e(Object(o.f)({msg:n,auth:a,socket:s}))}catch(n){e({type:c.c.ALERT,payload:{error:n.response.data.msg}})}}},p=e=>{let{post:t,auth:a}=e;return async e=>{const n=Object(s.a)(Object(s.a)({},a.user),{},{saved:[...a.user.saved,t._id]});e({type:c.c.AUTH,payload:Object(s.a)(Object(s.a)({},a),{},{user:n})});try{await Object(r.c)("savePost/".concat(t._id),null,a.token)}catch(o){e({type:c.c.ALERT,payload:{error:o.response.data.msg}})}}},h=e=>{let{post:t,auth:a}=e;return async e=>{const n=Object(s.a)(Object(s.a)({},a.user),{},{saved:a.user.saved.filter((e=>e!==t._id))});e({type:c.c.AUTH,payload:Object(s.a)(Object(s.a)({},a),{},{user:n})});try{await Object(r.c)("unSavePost/".concat(t._id),null,a.token)}catch(o){e({type:c.c.ALERT,payload:{error:o.response.data.msg}})}}}},68:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(11),n=a(4),r=a(6),o=a(12),l=a(49),i=a(0);t.default=()=>{const{id:e}=Object(c.h)(),[t,a]=Object(s.useState)([]),{auth:d,detailPost:j}=Object(n.c)((e=>e)),b=Object(n.b)();return Object(s.useEffect)((()=>{if(b(Object(r.d)({detailPost:j,id:e,auth:d})),j.length>0){const t=j.filter((t=>t._id===e));a(t)}}),[j,b,e,d]),Object(i.jsxs)("div",{className:"posts",children:[0===t.length&&Object(i.jsx)("img",{src:o.a,alt:"loading",className:"d-block mx-auto my-4"}),t.map((e=>Object(i.jsx)(l.a,{post:e},e._id)))]})}},8:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return j}));var s=a(2),c=a(3),n=a(5);const r={GET_NOTIFIES:"GET_NOTIFIES",CREATE_NOTIFY:"CREATE_NOTIFY",REMOVE_NOTIFY:"REMOVE_NOTIFY",UPDATE_NOTIFY:"UPDATE_NOTIFY",UPDATE_SOUND:"UPDATE_SOUND",DELETE_ALL_NOTIFIES:"DELETE_ALL_NOTIFIES"},o=e=>{let{msg:t,auth:a,socket:r}=e;return async e=>{try{const e=await Object(n.d)("notify",t,a.token);r.emit("createNotify",Object(s.a)(Object(s.a)({},e.data.notify),{},{user:{username:a.user.username,avatar:a.user.avatar}}))}catch(o){e({type:c.c.ALERT,payload:{error:o.response.data.msg}})}}},l=e=>{let{msg:t,auth:a,socket:s}=e;return async e=>{try{await Object(n.a)("notify/".concat(t.id,"?url=").concat(t.url),a.token),s.emit("removeNotify",t)}catch(r){e({type:c.c.ALERT,payload:{error:r.response.data.msg}})}}},i=e=>async t=>{try{const a=await Object(n.b)("notifies",e);t({type:r.GET_NOTIFIES,payload:a.data.notifies})}catch(a){t({type:c.c.ALERT,payload:{error:a.response.data.msg}})}},d=e=>{let{msg:t,auth:a}=e;return async e=>{e({type:r.UPDATE_NOTIFY,payload:Object(s.a)(Object(s.a)({},t),{},{isRead:!0})});try{await Object(n.c)("/isReadNotify/".concat(t._id),null,a.token)}catch(o){e({type:c.c.ALERT,payload:{error:o.response.data.msg}})}}},j=e=>async t=>{t({type:r.DELETE_ALL_NOTIFIES,payload:[]});try{await Object(n.a)("deleteAllNotify",e)}catch(a){t({type:c.c.ALERT,payload:{error:a.response.data.msg}})}}},80:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(13),n=a(2),r=a(4),o=a(26),l=a(3),i=a(14),d=a(0);var j=e=>{let{setOnEdit:t}=e;const[a,c]=Object(s.useState)({fullname:"",mobile:"",address:"",website:"",story:"",gender:""}),{fullname:j,mobile:b,address:u,website:m,story:O,gender:p}=a,[h,f]=Object(s.useState)(""),{auth:x,theme:y}=Object(r.c)((e=>e)),g=Object(r.b)();Object(s.useEffect)((()=>{c(x.user)}),[x.user]);const v=e=>{const{name:t,value:s}=e.target;c(Object(n.a)(Object(n.a)({},a),{},{[t]:s}))};return Object(d.jsxs)("div",{className:"edit_profile",children:[Object(d.jsx)("button",{className:"btn btn-danger btn_close",onClick:()=>t(!1),children:"Close"}),Object(d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g(Object(i.e)({userData:a,avatar:h,auth:x}))},children:[Object(d.jsxs)("div",{className:"info_avatar",children:[Object(d.jsx)("img",{src:h?URL.createObjectURL(h):x.user.avatar,alt:"avatar",style:{filter:y?"invert(1)":"invert(0)"}}),Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"fas fa-camera"}),Object(d.jsx)("p",{children:"Change"}),Object(d.jsx)("input",{type:"file",name:"file",id:"file_up",accept:"image/*",onChange:e=>{const t=e.target.files[0],a=Object(o.a)(t);if(a)return g({type:l.c.ALERT,payload:{error:a}});f(t)}})]})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"fullname",children:"Full Name"}),Object(d.jsxs)("div",{className:"position-relative",children:[Object(d.jsx)("input",{type:"text",className:"form-control",id:"fullname",name:"fullname",value:j,onChange:v}),Object(d.jsxs)("small",{className:"text-danger position-absolute",style:{top:"50%",right:"5px",transform:"translateY(-50%)"},children:[j.length,"/25"]})]})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),Object(d.jsx)("input",{type:"text",name:"mobile",value:b,className:"form-control",onChange:v})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"address",children:"Address"}),Object(d.jsx)("input",{type:"text",name:"address",value:u,className:"form-control",onChange:v})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"website",children:"Website"}),Object(d.jsx)("input",{type:"text",name:"website",value:m,className:"form-control",onChange:v})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"story",children:"Story"}),Object(d.jsx)("textarea",{name:"story",value:O,cols:"30",rows:"4",className:"form-control",onChange:v}),Object(d.jsxs)("small",{className:"text-danger d-block text-right",children:[O.length,"/200"]})]}),Object(d.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(d.jsx)("div",{className:"input-group-prepend px-0 mb-4",children:Object(d.jsxs)("select",{name:"gender",id:"gender",value:p,className:"custom-select text-capitalize",onChange:v,children:[Object(d.jsx)("option",{value:"male",children:"Male"}),Object(d.jsx)("option",{value:"female",children:"Female"}),Object(d.jsx)("option",{value:"other",children:"Other"})]})}),Object(d.jsx)("button",{className:"btn btn-info w-100",type:"submit",children:"Save"})]})]})};var b=e=>{let{user:t}=e;const[a,c]=Object(s.useState)(!1),{auth:n,profile:o,socket:l}=Object(r.c)((e=>e)),j=Object(r.b)(),[b,u]=Object(s.useState)(!1);Object(s.useEffect)((()=>(n.user.following.find((e=>e._id===t._id))&&c(!0),()=>c(!1))),[n.user.following,t._id]);return Object(d.jsx)(d.Fragment,{children:a?Object(d.jsx)("button",{className:"btn btn-outline-danger",onClick:async()=>{b||(c(!1),u(!0),await j(Object(i.d)({users:o.users,user:t,auth:n,socket:l})),u(!1))},children:"UnFollow"}):Object(d.jsx)("button",{className:"btn btn-outline-info",onClick:async()=>{b||(c(!0),u(!0),await j(Object(i.b)({users:o.users,user:t,auth:n,socket:l})),u(!1))},children:"Follow"})})},u=a(25);var m=e=>{let{users:t,setShowFollowers:a}=e;const{auth:s}=Object(r.c)((e=>e));return Object(d.jsx)("div",{className:"follow",children:Object(d.jsxs)("div",{className:"follow_box",children:[Object(d.jsx)("h5",{className:"text-center",children:"Followers"}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"follow_content",children:t.map((e=>Object(d.jsx)(u.a,{user:e,setShowFollowers:a,children:s.user._id!==e._id&&Object(d.jsx)(b,{user:e})},e._id)))}),Object(d.jsx)("div",{className:"close",onClick:()=>a(!1),children:"\xd7"})]})})};var O=e=>{let{users:t,setShowFollowing:a}=e;const{auth:s}=Object(r.c)((e=>e));return Object(d.jsx)("div",{className:"follow",children:Object(d.jsxs)("div",{className:"follow_box",children:[Object(d.jsx)("h5",{className:"text-center",children:"Following"}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"follow_content",children:t.map((e=>Object(d.jsx)(u.a,{user:e,setShowFollowing:a,children:s.user._id!==e._id&&Object(d.jsx)(b,{user:e})},e._id)))}),Object(d.jsx)("div",{className:"close",onClick:()=>a(!1),children:"\xd7"})]})})};var p=e=>{let{id:t,auth:a,profile:n,dispatch:r}=e;const[o,i]=Object(s.useState)([]),[u,p]=Object(s.useState)(!1),[h,f]=Object(s.useState)(!1),[x,y]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{if(t===a.user._id)i([a.user]);else{const e=n.users.filter((e=>e._id===t));i(e)}}),[t,a,r,n.users]),Object(s.useEffect)((()=>{r(h||x||u?{type:l.c.MODAL,payload:!0}:{type:l.c.MODAL,payload:!1})}),[h,x,u,r]),Object(d.jsx)("div",{className:"info",children:o.map((e=>Object(d.jsxs)("div",{className:"info_container",children:[Object(d.jsx)(c.a,{src:e.avatar,size:"supper-avatar"}),Object(d.jsxs)("div",{className:"info_content",children:[Object(d.jsxs)("div",{className:"info_content_title",children:[Object(d.jsx)("h2",{children:e.username}),e._id===a.user._id?Object(d.jsx)("button",{className:"btn btn-outline-info",onClick:()=>p(!0),children:"Edit Profile"}):Object(d.jsx)(b,{user:e})]}),Object(d.jsxs)("div",{className:"follow_btn",children:[Object(d.jsxs)("span",{className:"mr-4",onClick:()=>f(!0),children:[e.followers.length," Followers"]}),Object(d.jsxs)("span",{className:"ml-4",onClick:()=>y(!0),children:[e.following.length," Following"]})]}),Object(d.jsxs)("h6",{children:[e.fullname," ",Object(d.jsx)("span",{className:"text-danger",children:e.mobile})]}),Object(d.jsx)("p",{className:"m-0",children:e.address}),Object(d.jsx)("h6",{className:"m-0",children:e.email}),Object(d.jsx)("a",{href:e.website,target:"_blank",rel:"noreferrer",children:e.website}),Object(d.jsx)("p",{children:e.story})]}),u&&Object(d.jsx)(j,{setOnEdit:p}),h&&Object(d.jsx)(m,{users:e.followers,setShowFollowers:f}),x&&Object(d.jsx)(O,{users:e.following,setShowFollowing:y})]},e._id)))})},h=a(31),f=a(12),x=a(27),y=a(5);var g=e=>{let{auth:t,id:a,dispatch:c,profile:r}=e;const[o,l]=Object(s.useState)([]),[j,b]=Object(s.useState)(9),[u,m]=Object(s.useState)(0),[O,p]=Object(s.useState)(!1);Object(s.useEffect)((()=>{r.posts.forEach((e=>{e._id===a&&(l(e.posts),b(e.result),m(e.page))}))}),[r.posts,a]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(h.a,{posts:o,result:j}),O&&Object(d.jsx)("img",{src:f.a,alt:"loading",className:"d-block mx-auto"}),Object(d.jsx)(x.a,{result:j,page:u,load:O,handleLoadMore:async()=>{p(!0);const e=await Object(y.b)("user_posts/".concat(a,"?limit=").concat(9*u),t.token),s=Object(n.a)(Object(n.a)({},e.data),{},{page:u+1,_id:a});c({type:i.a.UPDATE_POST,payload:s}),p(!1)}})]})};var v=e=>{let{auth:t,dispatch:a}=e;const[c,n]=Object(s.useState)([]),[r,o]=Object(s.useState)(9),[i,j]=Object(s.useState)(2),[b,u]=Object(s.useState)(!1);Object(s.useEffect)((()=>(u(!0),Object(y.b)("getSavePosts",t.token).then((e=>{n(e.data.savePosts),o(e.data.result),u(!1)})).catch((e=>{a({type:l.c.ALERT,payload:{error:e.response.data.msg}})})),()=>n([]))),[t.token,a]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(h.a,{posts:c,result:r}),b&&Object(d.jsx)("img",{src:f.a,alt:"loading",className:"d-block mx-auto"}),Object(d.jsx)(x.a,{result:r,page:i,load:b,handleLoadMore:async()=>{u(!0);const e=await Object(y.b)("getSavePosts?limit=".concat(9*i),t.token);n(e.data.savePosts),o(e.data.result),j(i+1),u(!1)}})]})},E=a(11);t.default=()=>{const{profile:e,auth:t}=Object(r.c)((e=>e)),a=Object(r.b)(),{id:c}=Object(E.h)(),[n,o]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{e.ids.every((e=>e!==c))&&a(Object(i.c)({id:c,auth:t}))}),[c,t,a,e.ids]),Object(d.jsxs)("div",{className:"profile",children:[Object(d.jsx)(p,{auth:t,profile:e,dispatch:a,id:c}),t.user._id===c&&Object(d.jsxs)("div",{className:"profile_tab",children:[Object(d.jsx)("button",{className:n?"":"active",onClick:()=>o(!1),children:"Posts"}),Object(d.jsx)("button",{className:n?"active":"",onClick:()=>o(!0),children:"Saved"})]}),e.loading?Object(d.jsx)("img",{className:"d-block mx-auto",src:f.a,alt:"loading"}):Object(d.jsx)(d.Fragment,{children:n?Object(d.jsx)(v,{auth:t,dispatch:a}):Object(d.jsx)(g,{auth:t,profile:e,dispatch:a,id:c})})]})}},81:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(48),n=a(25),r=a(4),o=a(11),l=a(13),i=a(23),d=a(10),j=a(0);var b=e=>{let{total:t}=e;return Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:parseInt(t/3600).toString().length<2?"0"+parseInt(t/3600):parseInt(t/3600)}),Object(j.jsx)("span",{children:":"}),Object(j.jsx)("span",{children:parseInt(t/60).toString().length<2?"0"+parseInt(t/60):parseInt(t/60)}),Object(j.jsx)("span",{children:":"}),Object(j.jsx)("span",{children:(t%60).toString().length<2?"0"+t%60+"s":t%60+"s"})]})};var u=e=>{let{user:t,msg:a,theme:s,data:c}=e;const{auth:n}=Object(r.c)((e=>e)),o=Object(r.b)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"chat_title",children:[Object(j.jsx)(l.a,{src:t.avatar,size:"small-avatar"}),Object(j.jsx)("span",{children:t.username})]}),Object(j.jsxs)("div",{className:"you_content",children:[t._id===n.user._id&&Object(j.jsx)("i",{className:"fas fa-trash text-danger",onClick:()=>{c&&window.confirm("Do you want to delete?")&&o(Object(d.d)({msg:a,data:c,auth:n}))}}),Object(j.jsxs)("div",{children:[a.text&&Object(j.jsx)("div",{className:"chat_text",style:{filter:s?"invert(1)":"invert(0)"},children:a.text}),a.media.map(((e,t)=>Object(j.jsx)("div",{children:e.url.match(/video/i)?Object(i.b)(e.url,s):Object(i.a)(e.url,s)},t)))]}),a.call&&Object(j.jsxs)("button",{className:"btn d-flex align-items-center py-3",style:{background:"#eee",borderRadius:"10px"},children:[Object(j.jsx)("span",{className:"material-icons font-weight-bold mr-1",style:{fontSize:"2.5rem",color:0===a.call.times?"crimson":"green",filter:s?"invert(1)":"invert(0)"},children:0===a.call.times?a.call.video?"videocam_off":"phone_disabled":a.call.video?"video_camera_front":"call"}),Object(j.jsxs)("div",{className:"text-left",children:[Object(j.jsx)("h6",{children:a.call.video?"Video Call":"Audio Call"}),Object(j.jsx)("small",{children:a.call.times>0?Object(j.jsx)(b,{total:a.call.times}):new Date(a.createdAt).toLocaleTimeString()})]})]})]}),Object(j.jsx)("div",{className:"chat_time",children:new Date(a.createdAt).toLocaleString()})]})},m=a(33),O=a(3),p=a(26),h=a(12);var f=()=>{const{auth:e,message:t,theme:a,socket:c,peer:l}=Object(r.c)((e=>e)),b=Object(r.b)(),{id:f}=Object(o.h)(),[x,y]=Object(s.useState)([]),[g,v]=Object(s.useState)(""),[E,N]=Object(s.useState)([]),[_,w]=Object(s.useState)(!1),T=Object(s.useRef)(),S=Object(s.useRef)(),[k,A]=Object(s.useState)([]),[L,C]=Object(s.useState)(9),[D,I]=Object(s.useState)(0),[R,P]=Object(s.useState)(0),U=Object(o.f)();Object(s.useEffect)((()=>{const e=t.data.find((e=>e._id===f));e&&(A(e.messages),C(e.result),I(e.page))}),[t.data,f]),Object(s.useEffect)((()=>{if(f&&t.users.length>0){setTimeout((()=>{T.current.scrollIntoView({behavior:"smooth",block:"end"})}),50);const e=t.users.find((e=>e._id===f));e&&y(e)}}),[t.users,f]);Object(s.useEffect)((()=>{(async()=>{t.data.every((e=>e._id!==f))&&(await b(Object(d.f)({auth:e,id:f})),setTimeout((()=>{T.current.scrollIntoView({behavior:"smooth",block:"end"})}),50))})()}),[f,b,e,t.data]),Object(s.useEffect)((()=>{new IntersectionObserver((e=>{e[0].isIntersecting&&P((e=>e+1))}),{threshold:.1}).observe(S.current)}),[P]),Object(s.useEffect)((()=>{R>1&&L>=9*D&&(b(Object(d.g)({auth:e,id:f,page:D+1})),P(1))}),[R]);const F=t=>{let{video:a}=t;const{_id:s,avatar:c,username:n,fullname:r}=x,o={sender:e.user._id,recipient:s,avatar:c,username:n,fullname:r,video:a};b({type:O.c.CALL,payload:o})},G=t=>{let{video:a}=t;const{_id:s,avatar:n,username:r,fullname:o}=e.user,i={sender:s,recipient:x._id,avatar:n,username:r,fullname:o,video:a};l.open&&(i.peerId=l._id),c.emit("callUser",i)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"message_header",style:{cursor:"pointer"},children:0!==x.length&&Object(j.jsx)(n.a,{user:x,children:Object(j.jsxs)("div",{children:[Object(j.jsx)("i",{className:"fas fa-phone-alt",onClick:()=>{F({video:!1}),G({video:!1})}}),Object(j.jsx)("i",{className:"fas fa-video mx-3",onClick:()=>{F({video:!0}),G({video:!0})}}),Object(j.jsx)("i",{className:"fas fa-trash text-danger",onClick:()=>{if(window.confirm("Do you want to delete?"))return b(Object(d.c)({auth:e,id:f})),U.push("/message")}})]})})}),Object(j.jsx)("div",{className:"chat_container",style:{height:E.length>0?"calc(100% - 180px)":""},children:Object(j.jsxs)("div",{className:"chat_display",ref:T,children:[Object(j.jsx)("button",{style:{marginTop:"-25px",opacity:0},ref:S,children:"Load more"}),k.map(((t,s)=>Object(j.jsxs)("div",{children:[t.sender!==e.user._id&&Object(j.jsx)("div",{className:"chat_row other_message",children:Object(j.jsx)(u,{user:x,msg:t,theme:a})}),t.sender===e.user._id&&Object(j.jsx)("div",{className:"chat_row you_message",children:Object(j.jsx)(u,{user:e.user,msg:t,theme:a,data:k})})]},s))),_&&Object(j.jsx)("div",{className:"chat_row you_message",children:Object(j.jsx)("img",{src:h.a,alt:"loading"})})]})}),Object(j.jsx)("div",{className:"show_media",style:{display:E.length>0?"grid":"none"},children:E.map(((e,t)=>Object(j.jsxs)("div",{id:"file_media",children:[e.type.match(/video/i)?Object(i.b)(URL.createObjectURL(e),a):Object(i.a)(URL.createObjectURL(e),a),Object(j.jsx)("span",{onClick:()=>(e=>{const t=[...E];t.splice(e,1),N(t)})(t),children:"\xd7"})]},t)))}),Object(j.jsxs)("form",{className:"chat_input",onSubmit:async t=>{if(t.preventDefault(),!g.trim()&&0===E.length)return;v(""),N([]),w(!0);let a=[];E.length>0&&(a=await Object(p.b)(E));const s={sender:e.user._id,recipient:f,text:g,media:a,createdAt:(new Date).toISOString()};w(!1),await b(Object(d.b)({msg:s,auth:e,socket:c})),T.current&&T.current.scrollIntoView({behavior:"smooth",block:"end"})},children:[Object(j.jsx)("input",{type:"text",placeholder:"Enter you message...",value:g,onChange:e=>v(e.target.value),style:{filter:a?"invert(1)":"invert(0)",background:a?"#040404":"",color:a?"white":""}}),Object(j.jsx)(m.a,{setContent:v,content:g,theme:a}),Object(j.jsxs)("div",{className:"file_upload",children:[Object(j.jsx)("i",{className:"fas fa-image text-danger"}),Object(j.jsx)("input",{type:"file",name:"file",id:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>{const t=[...e.target.files];let a="",s=[];t.forEach((e=>e?e.size>5242880?a="The image/video largest is 5mb.":s.push(e):a="File does not exist.")),a&&b({type:O.c.ALERT,payload:{error:a}}),N([...E,...s])}})]}),Object(j.jsx)("button",{type:"submit",className:"material-icons",disabled:!(g||E.length>0),children:"near_me"})]})]})};t.default=()=>Object(j.jsxs)("div",{className:"message d-flex",children:[Object(j.jsx)("div",{className:"col-md-4 border-right px-0 left_mess",children:Object(j.jsx)(c.a,{})}),Object(j.jsx)("div",{className:"col-md-8 px-0",children:Object(j.jsx)(f,{})})]})},91:function(e,t,a){},96:function(e,t,a){var s={"./discover":58,"./discover.js":58,"./home":47,"./home.js":47,"./login":45,"./login.js":45,"./message":41,"./message/":41,"./message/[id]":81,"./message/[id].js":81,"./message/index":41,"./message/index.js":41,"./post/[id]":68,"./post/[id].js":68,"./profile/[id]":80,"./profile/[id].js":80,"./register":46,"./register.js":46};function c(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}c.keys=function(){return Object.keys(s)},c.resolve=n,e.exports=c,c.id=96}},[[142,1,2]]]);
//# sourceMappingURL=main.749b0d4b.chunk.js.map